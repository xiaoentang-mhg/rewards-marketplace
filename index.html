<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Albert+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
<title>SingSaver Rewards Marketplace — Concept C (Power User) — Full Spec</title>
<style>
/* ═══════════════════════════════════════════════════════
   DESIGN SYSTEM TOKENS
   ═══════════════════════════════════════════════════════ */
:root {
  /* Brand — SingSaver Blue */
  --ss-blue:          #04709B;
  --ss-blue-hover:    #00517A;
  --ss-blue-light:    #1CA1CE;
  --ss-blue-bg:       #E0F4F8;
  --ss-blue-100:      #B2E2ED;
  /* Brand — SingSaver Green */
  --ss-green:         #00B580;
  --ss-green-hover:   #009966;
  --ss-green-light:   #33DD9C;
  --ss-green-bg:      #E6F9F2;
  /* Everyday Greens */
  --majulah-green:    #AEECCA;
  --palm-green:       #00FEB3;
  --istana-green:     #33DD9C;
  --jewel-green:      #045D41;
  --botanic-green:    #002B1D;
  /* Everyday Blues */
  --bay-blue:         #001D28;
  --harbour-blue:     #003955;
  --raffles-blue:     #2D9FFF;
  --marina-blue:      #97DAFF;
  --merlion-blue:     #AEFEFF;
  /* Accent Colours */
  --accent-purple:    #9249EF;
  --accent-pink:      #FF7ABC;
  --accent-yellow:    #FFCB45;
  --accent-orange:    #FF913A;
  /* Semantic */
  --green:    #059669; --green-bg:  #ECFDF5;
  --blue:     #0284C7; --blue-bg:   #E0F2FE;
  --orange:   #EA580C; --orange-bg: #FFF7ED;
  --red:      #DC2626; --red-bg:    #FEF2F2;
  --amber:    #D97706; --amber-bg:  #FFFBEB;
  /* Neutral */
  --g50: #FAFAFA; --g100: #F5F5F5; --g150: #EDEDED; --g200: #E5E5E5;
  --g300: #D4D4D4; --g400: #A3A3A3; --g500: #737373; --g600: #525252;
  --g700: #404040; --g800: #262626; --g900: #171717;
  /* Radii */
  --r-sm: 6px; --r-md: 10px; --r-lg: 14px; --r-xl: 20px; --r-full: 9999px;
  /* Shadows */
  --sh-xs: 0 1px 2px rgba(0,0,0,0.05);
  --sh-sm: 0 1px 3px rgba(0,0,0,0.08), 0 1px 2px rgba(0,0,0,0.04);
  --sh-md: 0 4px 6px -1px rgba(0,0,0,0.08), 0 2px 4px -2px rgba(0,0,0,0.05);
  --sh-lg: 0 10px 15px -3px rgba(0,0,0,0.08), 0 4px 6px -4px rgba(0,0,0,0.05);
  --sh-xl: 0 20px 25px -5px rgba(0,0,0,0.1), 0 8px 10px -6px rgba(0,0,0,0.05);
  /* Type */
  --font: 'Albert Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: var(--font); background: var(--g50); color: var(--g900); line-height: 1.5; -webkit-font-smoothing: antialiased; }
button { font-family: var(--font); cursor: pointer; }
input, select { font-family: var(--font); }

/* ═══ DESIGNER ANNOTATION SYSTEM ═══ */
.anno { position: relative; }
.anno::before {
  content: attr(data-anno);
  position: absolute; top: -8px; right: 8px; z-index: 50;
  background: #FF006E; color: #fff; font-size: 9px; font-weight: 800;
  padding: 2px 8px; border-radius: 4px; letter-spacing: 0.5px;
  text-transform: uppercase; pointer-events: none;
  opacity: 0; transition: opacity 0.2s;
}
body.show-annos .anno::before { opacity: 1; }
/* ═══ USER PROFILE DROPDOWN ═══ */
.hb-profile {
  position: relative;
}
.hb-avatar {
  width: 36px; height: 36px; border-radius: 50%; background: var(--ss-blue);
  color: #fff; font-size: 14px; font-weight: 800; border: 2px solid var(--ss-blue-light);
  display: flex; align-items: center; justify-content: center; cursor: pointer;
  transition: box-shadow 0.15s;
}
.hb-avatar:hover { box-shadow: 0 0 0 3px var(--ss-blue-bg); }
.hb-streak-dot {
  position: absolute; top: -2px; right: -2px; width: 14px; height: 14px;
  background: var(--orange); color: #fff; font-size: 8px; font-weight: 800;
  border-radius: 50%; display: flex; align-items: center; justify-content: center;
  border: 2px solid #fff;
}
.profile-dropdown {
  position: absolute; top: calc(100% + 8px); right: 0; width: 320px;
  background: #fff; border: 1px solid var(--g200); border-radius: var(--r-lg);
  box-shadow: var(--sh-xl); z-index: 300; display: none;
  overflow: hidden;
}
.profile-dropdown.show { display: block; }

/* Profile header */
.pd-header {
  padding: 20px; background: linear-gradient(135deg, var(--ss-blue) 0%, #00517A 100%);
  color: #fff;
}
.pd-user { display: flex; align-items: center; gap: 12px; margin-bottom: 12px; }
.pd-user-avatar {
  width: 44px; height: 44px; border-radius: 50%; background: rgba(255,255,255,0.2);
  font-size: 18px; font-weight: 800; display: flex; align-items: center; justify-content: center;
}
.pd-user-info h4 { font-size: 15px; font-weight: 700; }
.pd-user-info p { font-size: 12px; opacity: 0.7; }
.pd-credits {
  background: rgba(255,255,255,0.15); border-radius: var(--r-md); padding: 10px 14px;
  display: flex; align-items: center; justify-content: space-between;
}
.pd-credits-label { font-size: 12px; opacity: 0.7; }
.pd-credits-value { font-size: 20px; font-weight: 800; }

/* Daily check-in */
.pd-checkin {
  padding: 16px 20px; border-bottom: 1px solid var(--g150);
}
.pd-checkin-title {
  display: flex; align-items: center; justify-content: space-between;
  margin-bottom: 12px;
}
.pd-checkin-title h5 { font-size: 14px; font-weight: 700; color: var(--g900); }
.pd-streak-badge {
  background: var(--orange-bg); color: var(--orange); font-size: 11px; font-weight: 800;
  padding: 3px 10px; border-radius: var(--r-full); display: flex; align-items: center; gap: 4px;
}
.pd-days {
  display: flex; gap: 6px; margin-bottom: 12px;
}
.pd-day {
  flex: 1; text-align: center; padding: 8px 0; border-radius: var(--r-md);
  background: var(--g50); border: 1.5px solid var(--g200);
  transition: all 0.15s;
}
.pd-day.checked {
  background: var(--green-bg); border-color: var(--green);
}
.pd-day.checked .pd-day-icon { color: var(--green); }
.pd-day.today {
  border-color: var(--ss-blue); border-style: dashed;
}
.pd-day.today.checked {
  border-style: solid; background: var(--ss-blue-bg); border-color: var(--ss-blue);
}
.pd-day.today.checked .pd-day-icon { color: var(--ss-blue); }
.pd-day-label { font-size: 9px; font-weight: 700; color: var(--g400); text-transform: uppercase; }
.pd-day-icon { font-size: 16px; margin-top: 2px; }
.pd-day-reward { font-size: 9px; font-weight: 700; color: var(--g500); margin-top: 1px; }
.pd-checkin-btn {
  width: 100%; padding: 10px; border-radius: var(--r-md); border: none;
  background: var(--ss-blue); color: #fff; font-size: 13px; font-weight: 700;
  cursor: pointer; transition: background 0.15s;
}
.pd-checkin-btn:hover { background: var(--ss-blue-hover); }
.pd-checkin-btn:disabled {
  background: var(--g200); color: var(--g400); cursor: default;
}
.pd-milestone {
  margin-top: 10px; background: var(--amber-bg); border-radius: var(--r-md);
  padding: 8px 12px; font-size: 12px; color: var(--amber); font-weight: 600;
  display: flex; align-items: center; gap: 6px;
}

/* Dropdown menu items */
.pd-menu {
  padding: 8px 0;
}
.pd-menu-item {
  display: flex; align-items: center; gap: 10px; padding: 10px 20px;
  font-size: 13px; color: var(--g700); cursor: pointer; transition: background 0.1s;
  text-decoration: none; border: none; background: none; width: 100%;
}
.pd-menu-item:hover { background: var(--g50); }
.pd-menu-item svg { color: var(--g400); flex-shrink: 0; }
.pd-menu-divider { height: 1px; background: var(--g150); margin: 4px 0; }

/* ═══ CONTENT ENGAGEMENT SECTION ═══ */
.content-section {
  background: #fff; padding: 48px 24px; border-top: 1px solid var(--g200);
}
.content-inner {
  max-width: 900px; margin: 0 auto;
}
.content-header {
  text-align: center; margin-bottom: 32px;
}
.content-header h2 {
  font-size: 24px; font-weight: 800; color: var(--g900); margin-bottom: 6px;
}
.content-header p {
  font-size: 15px; color: var(--g500); max-width: 480px; margin: 0 auto;
}
.content-cards {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 16px;
}
.content-card {
  border: 1.5px solid var(--g200); border-radius: var(--r-lg); overflow: hidden;
  transition: border-color 0.15s, box-shadow 0.15s;
}
.content-card:hover {
  border-color: var(--ss-blue-light); box-shadow: var(--sh-md);
}
.content-card-thumb {
  height: 140px; display: flex; align-items: center; justify-content: center;
  font-size: 48px; position: relative;
}
.content-card-type {
  position: absolute; top: 10px; left: 10px;
  background: rgba(0,0,0,0.6); color: #fff; font-size: 10px; font-weight: 700;
  padding: 3px 10px; border-radius: var(--r-full); text-transform: uppercase;
  display: flex; align-items: center; gap: 4px;
}
.content-card-reward {
  position: absolute; top: 10px; right: 10px;
  background: var(--ss-blue); color: #fff; font-size: 11px; font-weight: 800;
  padding: 3px 10px; border-radius: var(--r-full);
}
.content-card-body {
  padding: 16px;
}
.content-card-body h3 {
  font-size: 14px; font-weight: 700; color: var(--g900); margin-bottom: 6px;
  line-height: 1.4;
}
.content-card-body p {
  font-size: 12px; color: var(--g500); line-height: 1.5; margin-bottom: 12px;
  display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
}
.content-card-footer {
  display: flex; align-items: center; justify-content: space-between;
}
.content-card-meta {
  font-size: 11px; color: var(--g400); display: flex; align-items: center; gap: 10px;
}
.content-card-btn {
  padding: 6px 14px; border-radius: var(--r-full); border: 1.5px solid var(--ss-blue);
  background: #fff; color: var(--ss-blue); font-size: 12px; font-weight: 700;
  cursor: pointer; transition: all 0.15s;
}
.content-card-btn:hover {
  background: var(--ss-blue); color: #fff;
}

/* ═══ SURVEY MODAL ═══ */
.survey-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 400;
  display: none; align-items: center; justify-content: center;
  backdrop-filter: blur(4px);
}
.survey-overlay.show { display: flex; }
.survey-modal {
  background: #fff; border-radius: var(--r-xl); width: 560px; max-width: 95vw;
  max-height: 90vh; overflow-y: auto; box-shadow: var(--sh-xl);
  animation: surveyIn 0.3s ease;
}
@keyframes surveyIn { from { opacity: 0; transform: translateY(20px) scale(0.97); } to { opacity: 1; transform: none; } }

.sm-header {
  padding: 24px 28px 0; display: flex; align-items: flex-start; justify-content: space-between;
}
.sm-header-left h3 { font-size: 18px; font-weight: 800; color: var(--g900); }
.sm-header-left p { font-size: 13px; color: var(--g500); margin-top: 2px; }
.sm-close {
  background: none; border: none; font-size: 22px; color: var(--g400);
  cursor: pointer; padding: 4px; line-height: 1;
}
.sm-close:hover { color: var(--g700); }
.sm-reward-pill {
  display: inline-flex; align-items: center; gap: 4px;
  background: var(--ss-blue-bg); color: var(--ss-blue); font-size: 12px;
  font-weight: 800; padding: 4px 12px; border-radius: var(--r-full); margin-top: 4px;
}

/* Progress */
.sm-progress {
  padding: 20px 28px 0;
}
.sm-progress-bar {
  height: 6px; background: var(--g150); border-radius: var(--r-full); overflow: hidden;
}
.sm-progress-fill {
  height: 100%; background: var(--ss-blue); border-radius: var(--r-full);
  transition: width 0.4s cubic-bezier(0.4,0,0.2,1);
}
.sm-progress-label {
  display: flex; justify-content: space-between; margin-top: 8px;
  font-size: 12px; color: var(--g400); font-weight: 600;
}

/* Question area */
.sm-question {
  padding: 24px 28px;
}
.sm-q-label {
  font-size: 11px; font-weight: 700; color: var(--ss-blue); text-transform: uppercase;
  letter-spacing: 0.5px; margin-bottom: 8px;
}
.sm-q-text {
  font-size: 16px; font-weight: 700; color: var(--g900); line-height: 1.5; margin-bottom: 20px;
}

/* Answer options */
.sm-options { display: flex; flex-direction: column; gap: 10px; }
.sm-option {
  display: flex; align-items: center; gap: 12px; padding: 14px 16px;
  border: 1.5px solid var(--g200); border-radius: var(--r-md); cursor: pointer;
  transition: all 0.15s; font-size: 14px; color: var(--g700);
}
.sm-option:hover { border-color: var(--ss-blue-light); background: var(--ss-blue-bg); }
.sm-option.selected { border-color: var(--ss-blue); background: var(--ss-blue-bg); color: var(--ss-blue); font-weight: 600; }
.sm-option-radio {
  width: 20px; height: 20px; border-radius: 50%; border: 2px solid var(--g300);
  display: flex; align-items: center; justify-content: center; flex-shrink: 0;
  transition: all 0.15s;
}
.sm-option.selected .sm-option-radio {
  border-color: var(--ss-blue);
}
.sm-option.selected .sm-option-radio::after {
  content: ''; width: 10px; height: 10px; border-radius: 50%; background: var(--ss-blue);
}
/* Multi-select checkbox variant */
.sm-option-check {
  width: 20px; height: 20px; border-radius: 5px; border: 2px solid var(--g300);
  display: flex; align-items: center; justify-content: center; flex-shrink: 0;
  font-size: 12px; color: #fff; transition: all 0.15s;
}
.sm-option.selected .sm-option-check {
  border-color: var(--ss-blue); background: var(--ss-blue);
}

/* Slider input */
.sm-slider-wrap { padding: 8px 0; }
.sm-slider-labels { display: flex; justify-content: space-between; font-size: 12px; color: var(--g400); margin-bottom: 8px; }
.sm-slider {
  width: 100%; -webkit-appearance: none; height: 6px; border-radius: 3px;
  background: var(--g200); outline: none;
}
.sm-slider::-webkit-slider-thumb {
  -webkit-appearance: none; width: 22px; height: 22px; border-radius: 50%;
  background: var(--ss-blue); cursor: pointer; box-shadow: var(--sh-sm);
}
.sm-slider-value {
  text-align: center; font-size: 24px; font-weight: 800; color: var(--ss-blue); margin-top: 8px;
}

/* Text input */
.sm-textarea {
  width: 100%; min-height: 100px; padding: 14px 16px; border: 1.5px solid var(--g200);
  border-radius: var(--r-md); font-size: 14px; font-family: var(--font); resize: vertical;
  color: var(--g700); transition: border-color 0.15s;
}
.sm-textarea:focus { outline: none; border-color: var(--ss-blue); }
.sm-textarea-count { text-align: right; font-size: 11px; color: var(--g400); margin-top: 4px; }

/* Footer */
.sm-footer {
  padding: 16px 28px 24px; display: flex; gap: 10px; justify-content: space-between;
}
.sm-btn-back {
  padding: 12px 24px; border-radius: var(--r-md); border: 1.5px solid var(--g300);
  background: #fff; color: var(--g600); font-size: 14px; font-weight: 600;
  cursor: pointer; transition: all 0.15s;
}
.sm-btn-back:hover { border-color: var(--g400); }
.sm-btn-back:disabled { opacity: 0.4; cursor: default; }
.sm-btn-next {
  padding: 12px 32px; border-radius: var(--r-md); border: none;
  background: var(--ss-blue); color: #fff; font-size: 14px; font-weight: 700;
  cursor: pointer; transition: all 0.15s; margin-left: auto;
}
.sm-btn-next:hover { background: var(--ss-blue-hover); }
.sm-btn-next:disabled { background: var(--g200); color: var(--g400); cursor: default; }

/* Completion screen */
.sm-complete {
  padding: 48px 28px; text-align: center;
}
.sm-complete-icon { font-size: 64px; margin-bottom: 16px; }
.sm-complete h3 { font-size: 22px; font-weight: 800; color: var(--g900); margin-bottom: 8px; }
.sm-complete p { font-size: 14px; color: var(--g500); margin-bottom: 4px; }
.sm-complete-credits {
  display: inline-flex; align-items: center; gap: 6px;
  background: var(--green-bg); color: var(--green); font-size: 20px; font-weight: 800;
  padding: 10px 24px; border-radius: var(--r-full); margin: 16px 0;
}
.sm-complete-btn {
  display: block; width: 100%; max-width: 280px; margin: 20px auto 0; padding: 14px;
  border-radius: var(--r-md); border: none; background: var(--ss-blue); color: #fff;
  font-size: 15px; font-weight: 700; cursor: pointer;
}
.sm-complete-btn:hover { background: var(--ss-blue-hover); }

/* ═══ PROMO BANNER (rotating) ═══ */
.promo-banner {
  position: relative; overflow: hidden; height: 44px;
  background: linear-gradient(90deg, #04709B 0%, #00517A 100%);
  color: #fff; font-size: 13px; font-weight: 600;
}
.promo-slide {
  position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; gap: 10px;
  opacity: 0; transform: translateY(100%); transition: all 0.5s cubic-bezier(0.4,0,0.2,1);
  padding: 0 48px;
}
.promo-slide.active {
  opacity: 1; transform: translateY(0);
}
.promo-slide .promo-tag {
  background: rgba(255,255,255,0.2); padding: 2px 10px; border-radius: var(--r-full);
  font-size: 10px; font-weight: 800; text-transform: uppercase; letter-spacing: 0.5px;
  white-space: nowrap;
}
.promo-slide .promo-cta {
  background: #fff; color: var(--ss-blue); border: none; padding: 4px 14px;
  border-radius: var(--r-full); font-size: 11px; font-weight: 700; cursor: pointer;
  transition: background 0.15s; white-space: nowrap;
}
.promo-slide .promo-cta:hover { background: var(--ss-blue-100); }
.promo-nav {
  position: absolute; top: 50%; transform: translateY(-50%); background: none;
  border: none; color: rgba(255,255,255,0.6); font-size: 18px; cursor: pointer;
  padding: 0 12px; z-index: 2; height: 100%;
}
.promo-nav:hover { color: #fff; }
.promo-nav.prev { left: 0; }
.promo-nav.next { right: 0; }
.promo-dots {
  position: absolute; bottom: 4px; left: 50%; transform: translateX(-50%);
  display: flex; gap: 5px;
}
.promo-dots span {
  width: 5px; height: 5px; border-radius: 50%; background: rgba(255,255,255,0.3);
  transition: background 0.2s;
}
.promo-dots span.active { background: #fff; }

/* ═══ SURVEY SECTION ═══ */
.survey-section {
  background: #fff; padding: 48px 24px; border-top: 1px solid var(--g200);
}
.survey-inner {
  max-width: 900px; margin: 0 auto;
}
.survey-header {
  text-align: center; margin-bottom: 32px;
}
.survey-header h2 {
  font-size: 24px; font-weight: 800; color: var(--g900); margin-bottom: 6px;
}
.survey-header p {
  font-size: 15px; color: var(--g500); max-width: 480px; margin: 0 auto;
}
.survey-cards {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 16px;
}
.survey-card {
  border: 1.5px solid var(--g200); border-radius: var(--r-lg); padding: 24px;
  display: flex; flex-direction: column; gap: 12px;
  transition: border-color 0.15s, box-shadow 0.15s;
}
.survey-card:hover {
  border-color: var(--ss-blue-light); box-shadow: var(--sh-md);
}
.survey-card-top {
  display: flex; align-items: center; justify-content: space-between;
}
.survey-card-icon {
  width: 44px; height: 44px; border-radius: var(--r-md);
  display: flex; align-items: center; justify-content: center;
  font-size: 22px;
}
.survey-card-reward {
  background: var(--ss-blue-bg); color: var(--ss-blue); font-size: 13px;
  font-weight: 800; padding: 4px 12px; border-radius: var(--r-full);
}
.survey-card h3 {
  font-size: 15px; font-weight: 700; color: var(--g900);
}
.survey-card p {
  font-size: 13px; color: var(--g500); line-height: 1.5;
}
.survey-card-meta {
  display: flex; align-items: center; gap: 12px; font-size: 12px; color: var(--g400);
}
.survey-card-meta span {
  display: flex; align-items: center; gap: 4px;
}
.survey-card-btn {
  margin-top: auto; padding: 10px; border-radius: var(--r-md);
  border: 1.5px solid var(--ss-blue); background: #fff; color: var(--ss-blue);
  font-size: 13px; font-weight: 700; cursor: pointer; transition: all 0.15s;
  text-align: center;
}
.survey-card-btn:hover {
  background: var(--ss-blue); color: #fff;
}

/* ═══ REFER & EARN SECTION ═══ */
.refer-section {
  background: linear-gradient(135deg, var(--ss-blue-bg) 0%, #B2E2ED 100%);
  padding: 48px 24px; border-top: 1px solid var(--ss-blue-100);
}
.refer-inner {
  max-width: 720px; margin: 0 auto; text-align: center;
}
.refer-icon {
  width: 72px; height: 72px; background: var(--ss-blue); border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  margin: 0 auto 16px; font-size: 32px;
  box-shadow: 0 4px 16px rgba(108,63,191,0.3);
}
.refer-section h2 {
  font-size: 24px; font-weight: 800; color: var(--g900); margin-bottom: 8px;
}
.refer-section .refer-subtitle {
  font-size: 15px; color: var(--g500); margin-bottom: 8px;
}
.refer-highlight {
  color: var(--ss-blue); font-weight: 800; font-size: 18px;
}
.refer-methods {
  margin-top: 28px; display: flex; flex-direction: column; gap: 12px;
  text-align: left;
}
.refer-method {
  background: #fff; border: 1.5px solid var(--g200); border-radius: var(--r-lg);
  padding: 16px 20px; display: flex; align-items: center; gap: 16px;
  transition: border-color 0.15s, box-shadow 0.15s;
}
.refer-method:hover {
  border-color: var(--ss-blue-light); box-shadow: var(--sh-sm);
}
.refer-method-label {
  font-size: 14px; font-weight: 700; color: var(--g800); white-space: nowrap;
  min-width: 140px;
}
.refer-link-input {
  flex: 1; padding: 10px 14px; border: 1.5px solid var(--g200); border-radius: var(--r-md);
  font-size: 13px; color: var(--g500); background: var(--g50);
  overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
}
.refer-copy-btn {
  background: none; border: 1.5px solid var(--g300); border-radius: var(--r-md);
  padding: 8px 16px; font-size: 13px; font-weight: 600; color: var(--g700);
  cursor: pointer; display: flex; align-items: center; gap: 6px; transition: all 0.15s;
  white-space: nowrap;
}
.refer-copy-btn:hover { border-color: var(--ss-blue); color: var(--ss-blue); }
.refer-copy-btn.copied { border-color: var(--green); color: var(--green); }
.refer-social-btns { display: flex; gap: 10px; flex: 1; }
.refer-social-btn {
  flex: 1; padding: 10px 16px; border-radius: var(--r-md); border: none;
  font-size: 13px; font-weight: 700; color: #fff; cursor: pointer;
  display: flex; align-items: center; justify-content: center; gap: 8px;
  transition: opacity 0.15s;
}
.refer-social-btn:hover { opacity: 0.9; }
.refer-social-btn.whatsapp { background: #25D366; }
.refer-social-btn.telegram { background: #0088CC; }
.refer-social-btn.facebook { background: #1877F2; }
.refer-terms {
  margin-top: 20px; font-size: 12px; color: var(--g400);
}
.refer-terms a { color: var(--ss-blue); text-decoration: none; font-weight: 600; }
.refer-terms a:hover { text-decoration: underline; }

.anno-toggle { position: fixed; bottom: 20px; right: 20px; z-index: 999;
  background: #FF006E; color: #fff; border: none; padding: 10px 16px;
  border-radius: var(--r-full); font-size: 12px; font-weight: 700;
  box-shadow: var(--sh-lg); }
.anno-toggle:hover { background: #D4005A; }


/* ═══ SCREEN CONTAINERS ═══ */

/* ═══════════════════════════════════════════════════════
   SCREEN 1 — REWARDS CATALOGUE LANDING
   ═══════════════════════════════════════════════════════ */

/* ─── HEADER BAR (product header) ─── */
.header-bar { background: #fff; border-bottom: 1px solid var(--g200); padding: 12px 24px; display: flex; align-items: center; gap: 16px; }
.hb-logo { display: flex; align-items: center; flex-shrink: 0; }
.hb-logo img { height: 26px; width: auto; }
.hb-nav { display: flex; gap: 24px; margin-left: 32px; }
.hb-nav a { text-decoration: none; color: var(--g600); font-size: 14px; font-weight: 500; }
.hb-nav a.active { color: var(--ss-blue); font-weight: 700; }
.hb-right { margin-left: auto; display: flex; align-items: center; gap: 12px; }
.hb-saved { display: flex; align-items: center; gap: 4px; padding: 8px 14px; border-radius: var(--r-full); border: 1.5px solid var(--g200); font-size: 13px; font-weight: 600; color: var(--g600); background: #fff; }
.hb-saved:hover { border-color: var(--ss-blue); color: var(--ss-blue); }
.hb-saved.active { background: var(--ss-blue); color: #fff; border-color: var(--ss-blue); }

/* ─── HERO ─── */
.hero { background: linear-gradient(135deg, var(--ss-blue) 0%, var(--ss-blue-hover) 40%, var(--harbour-blue) 100%); color: #fff; padding: 40px 24px 32px; position: relative; overflow: hidden; }
.hero::after { content: ''; position: absolute; top: -50%; right: -20%; width: 500px; height: 500px; background: radial-gradient(circle, rgba(108,63,191,0.3) 0%, transparent 70%); pointer-events: none; }
.hero-inner { max-width: 1200px; margin: 0 auto; position: relative; z-index: 1; }
.hero h1 { font-size: 28px; font-weight: 800; margin-bottom: 6px; letter-spacing: -0.5px; }
.hero p { font-size: 15px; color: rgba(255,255,255,0.65); margin-bottom: 20px; max-width: 420px; }
.hero-search { position: relative; max-width: 520px; }
.hero-search input { width: 100%; padding: 14px 20px 14px 44px; border-radius: var(--r-lg); border: 1.5px solid rgba(255,255,255,0.15); background: rgba(255,255,255,0.08); backdrop-filter: blur(8px); color: #fff; font-size: 15px; transition: all 0.2s; }
.hero-search input::placeholder { color: rgba(255,255,255,0.4); }
.hero-search input:focus { outline: none; border-color: var(--ss-blue-light); background: rgba(255,255,255,0.12); }
.hero-search svg { position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: rgba(255,255,255,0.4); }
.hero-stats { display: flex; gap: 32px; margin-top: 20px; }
.hero-stat { text-align: center; }
.hero-stat .hs-num { font-size: 24px; font-weight: 800; }
.hero-stat .hs-label { font-size: 11px; color: rgba(255,255,255,0.5); text-transform: uppercase; letter-spacing: 0.5px; }

/* ─── SECTION HEADERS ─── */
.sec-header { display: flex; align-items: baseline; gap: 12px; padding: 28px 24px 14px; max-width: 1248px; margin: 0 auto; }
.sec-header h2 { font-size: 18px; font-weight: 700; }
.sec-header .sec-count { font-size: 13px; color: var(--g400); }
.sec-header .sec-link { margin-left: auto; font-size: 13px; color: var(--ss-blue); font-weight: 600; text-decoration: none; cursor: pointer; }
.sec-header .sec-link:hover { text-decoration: underline; }

/* ─── HORIZONTAL SCROLL ROW ─── */
.hscroll { display: flex; gap: 14px; padding: 0 24px 8px; max-width: 1248px; margin: 0 auto; overflow-x: auto; scroll-snap-type: x mandatory; -webkit-overflow-scrolling: touch; scroll-padding: 0 24px; }
.hscroll::-webkit-scrollbar { height: 0; }


/* ─── MAIN CATALOGUE LAYOUT ─── */
.catalogue { display: grid; grid-template-columns: 256px 1fr; gap: 0; max-width: 1248px; margin: 0 auto; padding: 0 24px 48px; min-height: 600px; }

/* ─── FILTER SIDEBAR ─── */
.sidebar { padding: 20px 20px 20px 0; position: sticky; top: 48px; height: fit-content; max-height: calc(100vh - 60px); overflow-y: auto; }
.filter-section { margin-bottom: 24px; }
.filter-title { font-size: 12px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; color: var(--g500); margin-bottom: 8px; display: flex; align-items: center; justify-content: space-between; }
.filter-title .ft-clear { font-size: 11px; text-transform: none; letter-spacing: 0; color: var(--ss-blue); cursor: pointer; font-weight: 600; display: none; }
.filter-title .ft-clear.visible { display: inline; }
.filter-opt { display: flex; align-items: center; gap: 8px; padding: 5px 0; cursor: pointer; font-size: 13px; color: var(--g700); transition: color 0.1s; }
.filter-opt:hover { color: var(--g900); }
.filter-show-more { display: block; background: none; border: none; color: var(--ss-blue); font-size: 12px; font-weight: 600; cursor: pointer; padding: 6px 0 2px; }
.filter-opt input[type="checkbox"] { width: 16px; height: 16px; accent-color: var(--ss-blue); border-radius: 4px; cursor: pointer; flex-shrink: 0; }
.filter-opt .fo-count { margin-left: auto; font-size: 11px; color: var(--g400); min-width: 20px; text-align: right; }
.filter-opt.dimmed { opacity: 0.4; }

/* Price range */
.price-slider { padding: 8px 0; }
.price-inputs { display: flex; gap: 8px; align-items: center; }
.price-inputs input { width: 100%; padding: 8px 10px; border: 1.5px solid var(--g200); border-radius: var(--r-sm); font-size: 13px; text-align: center; }
.price-inputs input:focus { outline: none; border-color: var(--ss-blue); }
.price-inputs span { color: var(--g400); font-size: 12px; }
.price-apply { margin-top: 8px; padding: 6px 12px; border-radius: var(--r-sm); border: 1.5px solid var(--ss-blue); background: var(--ss-blue-bg); color: var(--ss-blue); font-size: 12px; font-weight: 600; width: 100%; }
.price-apply:hover { background: var(--ss-blue); color: #fff; }

.sidebar-reset { width: 100%; padding: 10px; border: 1.5px solid var(--g300); border-radius: var(--r-md); background: #fff; color: var(--g600); font-size: 12px; font-weight: 600; margin-top: 8px; }
.sidebar-reset:hover { background: var(--g100); }

/* ─── RESULTS AREA ─── */
.results { padding: 20px 0 0 20px; border-left: 1px solid var(--g200); }

/* Active filters bar */
.active-filters { display: flex; gap: 6px; flex-wrap: wrap; margin-bottom: 12px; min-height: 32px; align-items: center; }
.active-pill { display: inline-flex; align-items: center; gap: 4px; padding: 4px 10px; border-radius: var(--r-full); background: var(--ss-blue-bg); color: var(--ss-blue); font-size: 11px; font-weight: 600; }
.active-pill .ap-x { cursor: pointer; font-size: 14px; margin-left: 2px; opacity: 0.6; }
.active-pill .ap-x:hover { opacity: 1; }
.clear-all-pill { color: var(--red); background: var(--red-bg); cursor: pointer; }

/* Toolbar */
.toolbar { display: flex; align-items: center; gap: 12px; margin-bottom: 16px; flex-wrap: wrap; }
.toolbar select { padding: 8px 28px 8px 12px; border: 1.5px solid var(--g200); border-radius: var(--r-sm); font-size: 13px; background: #fff; appearance: none; background-image: url("data:image/svg+xml,%3Csvg width='10' height='6' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0l5 6 5-6z' fill='%23737373'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 10px center; cursor: pointer; }
.toolbar select:focus { outline: none; border-color: var(--ss-blue); }
.result-count { font-size: 13px; color: var(--g500); }

/* ─── CARD — GRID MODE ─── */
.card-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(210px, 1fr)); gap: 14px; }

.rcard { background: #fff; border-radius: var(--r-lg); border: 1.5px solid var(--g200); overflow: hidden; cursor: pointer; transition: all 0.2s; position: relative; }
.rcard:hover { border-color: var(--ss-blue-light); box-shadow: var(--sh-md); transform: translateY(-2px); }
.rcard .rc-visual { height: 130px; display: flex; align-items: flex-end; justify-content: center; font-size: 44px; position: relative; padding: 30px 10px 10px; box-sizing: border-box; }
.rc-visual img { max-height: 85px; max-width: 80%; object-fit: contain; }
.modal-emoji img { width: 60px; height: 60px; object-fit: contain; }
.pw-reward-mini-emoji img { width: 32px; height: 32px; object-fit: contain; }
.ct-emoji img { width: 32px; height: 32px; object-fit: contain; }
.rcard .rc-visual.cash-bg, .rcard .rc-visual.digital-bg, .rcard .rc-visual.physical-bg { background: linear-gradient(135deg, #EEF0FF, #DBEAFE); }
.rcard .rc-badge { position: absolute; top: 8px; left: 8px; padding: 3px 8px; border-radius: 4px; font-size: 9px; font-weight: 800; text-transform: uppercase; letter-spacing: 0.3px; background: rgba(0,0,0,0.6); color: #fff; backdrop-filter: blur(4px); }
.rcard .rc-actions { position: absolute; top: 8px; right: 8px; display: flex; gap: 4px; opacity: 0; transition: opacity 0.15s; }
.rcard:hover .rc-actions { opacity: 1; }
.rcard .rc-act { width: 28px; height: 28px; border-radius: var(--r-sm); border: none; display: flex; align-items: center; justify-content: center; font-size: 13px; background: rgba(255,255,255,0.85); backdrop-filter: blur(4px); color: var(--g600); transition: all 0.15s; }
.rcard .rc-act:hover { background: var(--ss-blue); color: #fff; }
.rcard .rc-act.bookmarked { background: var(--ss-blue); color: #fff; }
.rcard .rc-act.compared { background: var(--green); color: #fff; }
.rcard .rc-body { padding: 12px 14px 14px; }
.rcard .rc-value { font-size: 22px; font-weight: 800; color: var(--ss-blue); letter-spacing: -0.5px; }
.rcard .rc-name { font-size: 14px; color: var(--g800); margin-top: 2px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; line-height: 1.4; min-height: 33px; }
.rcard .rc-meta { display: block; margin-top: 8px; }
.rcard .rc-brand { font-size: 10px; font-weight: 700; color: var(--g400); text-transform: uppercase; letter-spacing: 0.5px; }
.rcard .rc-dot { width: 3px; height: 3px; border-radius: 50%; background: var(--g300); }
.rcard .rc-effort { font-size: 10px; padding: 2px 8px; border-radius: var(--r-full); font-weight: 600; }
.rcard .rc-ful-icon { font-size: 10px; margin-left: auto; padding: 2px 7px; border-radius: var(--r-full); background: var(--g100); color: var(--g500); font-weight: 600; }
.rcard .rc-pw-line { font-size: 11px; color: var(--ss-blue); font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; line-height: 1.6; display: flex; align-items: center; gap: 4px; }
.rcard .rc-pw-line img.bank-logo { width: 16px; height: 16px; flex-shrink: 0; object-fit: contain; border-radius: 2px; }
.rcard .rc-pw-more { display: inline-block; font-size: 10px; color: var(--g500); font-weight: 700; background: var(--g100); padding: 1px 7px; border-radius: var(--r-full); margin-top: 4px; }

/* effort colors */
.eff-vl { background: var(--green-bg); color: var(--green); }
.eff-l { background: var(--blue-bg); color: var(--blue); }
.eff-m { background: var(--amber-bg); color: var(--amber); }
.eff-mh { background: var(--orange-bg); color: var(--orange); }
.eff-h { background: var(--red-bg); color: var(--red); }

/* ─── POPULARITY BADGES ─── */
.rc-pop-badge { position: absolute; top: 8px; left: 8px; padding: 3px 8px; border-radius: 4px; font-size: 9px; font-weight: 800; text-transform: uppercase; letter-spacing: 0.3px; z-index: 2; display: flex; align-items: center; gap: 3px; }
.pop-most-redeemed { background: #DC2626; color: #fff; }
.pop-trending { background: #EA580C; color: #fff; }
.pop-popular { background: #D97706; color: #fff; }
.pop-staff-pick { background: var(--ss-blue); color: #fff; }
.rc-pop-badge svg { width: 10px; height: 10px; fill: currentColor; }
/* Shift the existing badge down when pop badge is present */
.rcard .rc-badge.has-pop { top: 32px; }

/* ─── COUNTDOWN TIMER ─── */
.rc-countdown { position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(0deg, rgba(220,38,38,0.92) 0%, rgba(220,38,38,0.8) 100%); color: #fff; font-size: 10px; font-weight: 700; padding: 4px 8px; display: flex; align-items: center; gap: 5px; z-index: 2; }
.rc-countdown svg { width: 11px; height: 11px; fill: none; stroke: currentColor; stroke-width: 2; flex-shrink: 0; }
.rc-countdown .cd-label { opacity: 0.85; }
.rc-countdown .cd-time { font-variant-numeric: tabular-nums; letter-spacing: 0.3px; }

/* Limited Time section */
.ltd-section { background: linear-gradient(135deg, #FEF2F2 0%, #FFF7ED 100%); padding-bottom: 8px; }
.ltd-section .sec-header h2 { color: #DC2626; }
.ltd-badge-live { display: inline-flex; align-items: center; gap: 4px; padding: 2px 8px; border-radius: var(--r-full); background: #DC2626; color: #fff; font-size: 10px; font-weight: 700; margin-left: 8px; animation: pulse-badge 2s infinite; }
@keyframes pulse-badge { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }

/* ─── EMPTY STATE ─── */
.empty-state { text-align: center; padding: 64px 24px; }
.empty-state .es-icon { font-size: 48px; margin-bottom: 12px; }
.empty-state h3 { font-size: 18px; font-weight: 700; margin-bottom: 4px; }
.empty-state p { font-size: 14px; color: var(--g500); margin-bottom: 16px; }
.empty-state button { padding: 10px 20px; border-radius: var(--r-md); background: var(--ss-blue); color: #fff; border: none; font-size: 13px; font-weight: 700; }

/* ─── PAGINATION / LOAD MORE ─── */
.load-more { text-align: center; padding: 24px; }
.load-more button { padding: 12px 32px; border-radius: var(--r-md); border: 1.5px solid var(--g300); background: #fff; font-size: 14px; font-weight: 600; color: var(--g700); }
.load-more button:hover { border-color: var(--ss-blue); color: var(--ss-blue); }

/* ═══ COMPARE BAR ═══ */
.compare-bar { position: fixed; bottom: 0; left: 0; right: 0; background: #fff; border-top: 2px solid var(--ss-blue); padding: 12px 24px; display: flex; align-items: center; gap: 16px; z-index: 300; box-shadow: 0 -4px 20px rgba(0,0,0,0.1); transform: translateY(100%); transition: transform 0.3s ease; }
.compare-bar.show { transform: translateY(0); }
.cb-label { font-size: 13px; font-weight: 700; white-space: nowrap; color: var(--g700); }
.cb-items { display: flex; gap: 8px; flex: 1; overflow-x: auto; }
.cb-item { display: flex; align-items: center; gap: 6px; padding: 6px 12px; border-radius: var(--r-md); background: var(--g100); font-size: 12px; white-space: nowrap; border: 1px solid var(--g200); }
.cb-item .cbi-x { cursor: pointer; color: var(--g400); font-weight: 700; font-size: 14px; }
.cb-item .cbi-x:hover { color: var(--red); }
.compare-btn { padding: 10px 24px; border-radius: var(--r-md); background: var(--ss-blue); color: #fff; border: none; font-size: 13px; font-weight: 700; }
.compare-btn:hover { background: var(--ss-blue-hover); }

/* ═══ SCREEN 3 — REWARD DETAIL (QUICK-VIEW MODAL) ═══ */
.modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 400; justify-content: center; align-items: flex-start; padding: 48px 24px; overflow-y: auto; }
.modal-overlay.show { display: flex; }
.modal { background: #fff; border-radius: var(--r-xl); max-width: 560px; width: 100%; position: relative; overflow: hidden; box-shadow: var(--sh-xl); }
.modal-close { position: absolute; top: 16px; right: 16px; z-index: 10; width: 32px; height: 32px; border-radius: var(--r-full); border: none; background: rgba(0,0,0,0.05); color: var(--g500); font-size: 18px; display: flex; align-items: center; justify-content: center; }
.modal-close:hover { background: rgba(0,0,0,0.1); }
.modal-hero { padding: 32px 32px 24px; display: flex; gap: 20px; align-items: flex-start; }
.modal-emoji { width: 80px; height: 80px; border-radius: var(--r-lg); display: flex; align-items: center; justify-content: center; font-size: 40px; flex-shrink: 0; }
.modal-emoji.cash-bg { background: var(--green-bg); }
.modal-emoji.digital-bg { background: var(--blue-bg); }
.modal-emoji.physical-bg { background: var(--orange-bg); }
.modal-info h2 { font-size: 14px; color: var(--g500); font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
.modal-info .mi-value { font-size: 36px; font-weight: 800; color: var(--ss-blue); letter-spacing: -1px; line-height: 1.1; margin: 4px 0; }
.modal-info .mi-name { font-size: 16px; color: var(--g700); font-weight: 500; }
.modal-tags { display: flex; gap: 6px; flex-wrap: wrap; padding: 0 32px 20px; }
.modal-tag { font-size: 11px; padding: 4px 12px; border-radius: var(--r-full); font-weight: 600; }
.mt-badge { background: var(--ss-blue-bg); color: var(--ss-blue); }
.mt-effort { }
.mt-ful { background: var(--g100); color: var(--g600); }

.modal-details { padding: 0 32px 24px; }
.md-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.md-item { background: var(--g50); border-radius: var(--r-md); padding: 14px; }
.md-item label { display: block; font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; color: var(--g400); margin-bottom: 4px; }
.md-item span { font-size: 14px; font-weight: 600; color: var(--g800); }

.modal-how { padding: 0 32px 24px; }
.modal-how h3 { font-size: 14px; font-weight: 700; margin-bottom: 12px; }
.how-steps { display: flex; gap: 12px; }
.how-step { flex: 1; text-align: center; padding: 16px 12px; background: var(--g50); border-radius: var(--r-md); }
.how-step .hs-num { width: 24px; height: 24px; border-radius: 50%; background: var(--ss-blue); color: #fff; font-size: 12px; font-weight: 700; display: inline-flex; align-items: center; justify-content: center; margin-bottom: 6px; }
.how-step .hs-text { font-size: 12px; color: var(--g600); line-height: 1.4; }

.modal-footer { padding: 20px 32px; border-top: 1px solid var(--g200); display: flex; gap: 10px; }
.mf-save { flex: 0 0 auto; padding: 12px 16px; border-radius: var(--r-md); border: 1.5px solid var(--g200); background: #fff; font-size: 14px; }
.mf-save:hover { border-color: var(--ss-blue); }
.mf-cta { flex: 1; padding: 14px 24px; border-radius: var(--r-md); background: var(--ss-blue); color: #fff; border: none; font-size: 15px; font-weight: 700; text-align: center; }
.mf-cta:hover { background: var(--ss-blue-hover); }

/* ═══ COMPARE MODAL ═══ */
.compare-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 500; justify-content: center; align-items: flex-start; padding: 48px 24px; overflow-y: auto; }
.compare-overlay.show { display: flex; }
.compare-modal { background: #fff; border-radius: var(--r-xl); max-width: 960px; width: 100%; position: relative; padding: 32px; box-shadow: var(--sh-xl); }
.compare-modal h2 { font-size: 20px; font-weight: 700; margin-bottom: 20px; }
.ctable { width: 100%; border-collapse: collapse; }
.ctable th { padding: 12px; text-align: center; font-size: 12px; text-transform: uppercase; letter-spacing: 0.5px; color: var(--g500); border-bottom: 2px solid var(--g200); }
.ctable td { padding: 12px; text-align: center; font-size: 14px; border-bottom: 1px solid var(--g100); vertical-align: top; }
.ctable td:first-child { text-align: left; font-weight: 600; color: var(--g500); font-size: 12px; text-transform: uppercase; }
.ctable .ct-emoji { font-size: 28px; }
.ctable .ct-value { font-size: 20px; font-weight: 800; color: var(--ss-blue); }
.ctable .ct-name { font-size: 12px; color: var(--g600); margin-top: 4px; }
.ctable .ct-best { background: var(--green-bg); font-weight: 700; color: var(--green); }

/* ═══ RECIRCULATION ═══ */
.recirc { background: #fff; border-top: 1px solid var(--g200); padding: 0 0 48px; }

/* ═══ MOBILE FILTER SHEET ═══ */
.mobile-filter-btn { display: none; }
.filter-sheet-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 350; }
.filter-sheet-overlay.show { display: block; }
.filter-sheet { position: fixed; bottom: 0; left: 0; right: 0; background: #fff; z-index: 360; border-radius: 20px 20px 0 0; max-height: 85vh; overflow-y: auto; transform: translateY(100%); transition: transform 0.3s ease; box-shadow: 0 -8px 30px rgba(0,0,0,0.15); }
.filter-sheet.show { transform: translateY(0); }
.filter-sheet-header { display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; border-bottom: 1px solid var(--g200); position: sticky; top: 0; background: #fff; z-index: 1; border-radius: 20px 20px 0 0; }
.filter-sheet-header h3 { font-size: 16px; font-weight: 700; }
.filter-sheet-close { width: 32px; height: 32px; border-radius: var(--r-full); border: none; background: var(--g100); font-size: 18px; color: var(--g600); display: flex; align-items: center; justify-content: center; }
.filter-sheet-body { padding: 16px 20px 100px; }
.filter-sheet-footer { position: sticky; bottom: 0; padding: 16px 20px; background: #fff; border-top: 1px solid var(--g200); display: flex; gap: 10px; }
.filter-sheet-footer button { flex: 1; padding: 14px; border-radius: var(--r-md); font-size: 14px; font-weight: 700; }
.fs-reset { border: 1.5px solid var(--g300); background: #fff; color: var(--g600); }
.fs-apply { border: none; background: var(--ss-blue); color: #fff; }

/* ═══ RESPONSIVE — TABLET (≤900px) ═══ */
@media (max-width: 900px) {
  .promo-slide { font-size: 12px; padding: 0 36px; gap: 8px; }
  .profile-dropdown { width: 290px; right: -8px; }
  .pd-day-label { font-size: 8px; }
  .pd-day-icon { font-size: 14px; }
  .pd-day-reward { font-size: 8px; }
  .refer-method { flex-wrap: wrap; gap: 10px; }
  .refer-method-label { min-width: auto; width: 100%; }
  .refer-social-btns { flex-wrap: wrap; }
  .content-cards { grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); }
  /* Layout */
  .catalogue { grid-template-columns: 1fr; }
  .sidebar { display: none; }
  .results { border-left: none; padding-left: 0; }
  .power-layout { grid-template-columns: 1fr; }

  /* Mobile filter button */
  .mobile-filter-btn { display: inline-flex; align-items: center; gap: 6px; padding: 8px 16px; border-radius: var(--r-full); border: 1.5px solid var(--g200); background: #fff; font-size: 13px; font-weight: 600; color: var(--g700); }
  .mobile-filter-btn .mfb-count { background: var(--ss-blue); color: #fff; font-size: 10px; width: 18px; height: 18px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; }

  /* Header */
  .header-bar { padding: 10px 16px; gap: 12px; }
  .hb-nav { display: none; }
  .hb-logo img { height: 22px; }

  /* Hero */
  .hero { padding: 28px 16px 24px; }
  .hero h1 { font-size: 22px; }
  .hero p { font-size: 13px; margin-bottom: 16px; }
  .hero-search input { padding: 12px 16px 12px 40px; font-size: 14px; }
  .hero-stats { gap: 16px; }
  .hero-stat .hs-num { font-size: 18px; }

  /* Sections */
  .sec-header { padding: 20px 16px 10px; }
  .sec-header h2 { font-size: 16px; }
  .hscroll { padding: 0 16px 8px; gap: 10px; }

  /* Cards */
  .card-grid { grid-template-columns: repeat(auto-fill, minmax(155px, 1fr)); gap: 10px; }
  .rcard .rc-visual { height: 110px; font-size: 36px; padding: 26px 8px 8px; }
  .rc-visual img { max-height: 70px; }
  .rcard .rc-body { padding: 10px 12px 12px; }
  .rcard .rc-value { font-size: 18px; }
  .rcard .rc-name { font-size: 11px; min-height: 28px; }
  .rcard .rc-actions { opacity: 1; }

  /* Horizontal scroll cards */
  .hscroll .rcard { flex: 0 0 170px; }
  .hscroll .rcard .rc-visual { height: 80px; }

  /* Toolbar — sticky on mobile */
  .toolbar { padding: 8px 0; gap: 8px; position: sticky; top: 0; z-index: 50; background: var(--g50); }
  .toolbar select { font-size: 12px; padding: 7px 24px 7px 10px; }
  .results { padding: 16px 0 0 0; }
  .catalogue { padding: 0 16px 32px; }
  .sort-bar { padding: 8px 16px 16px; }
  .active-filters { gap: 4px; }

  /* Compare bar */
  .compare-bar { padding: 10px 16px; gap: 10px; }
  .cb-items { gap: 6px; }
  .cb-item { font-size: 11px; padding: 5px 10px; }
  .compare-btn { padding: 8px 16px; font-size: 12px; }

  /* Modals */
  .modal-overlay { padding: 0; align-items: flex-end; }
  .modal { border-radius: 20px 20px 0 0; max-width: 100%; max-height: 92vh; overflow-y: auto; }
  .modal-hero { padding: 24px 20px 16px; gap: 14px; flex-direction: column; align-items: center; text-align: center; }
  .modal-emoji { width: 64px; height: 64px; font-size: 32px; }
  .modal-info .mi-value { font-size: 28px; }
  .modal-info .mi-name { font-size: 14px; }
  .modal-tags { padding: 0 20px 16px; justify-content: center; }
  .modal-details { padding: 0 20px 20px; }
  .md-grid { grid-template-columns: 1fr 1fr; gap: 8px; }
  .md-item { padding: 10px; }
  .modal-how { padding: 0 20px 20px; }
  .how-steps { flex-direction: column; gap: 8px; }
  .modal-footer { padding: 16px 20px; }
  .mf-cta { padding: 12px 20px; font-size: 14px; }

  .compare-overlay { padding: 0; align-items: flex-end; }
  .compare-modal { border-radius: 20px 20px 0 0; max-width: 100%; max-height: 90vh; overflow-x: auto; padding: 20px; }
  .ctable { font-size: 12px; min-width: 500px; }

  /* Recirculation */
  .recirc { padding: 0 0 32px; }

  /* Annotation toggle */
  .anno-toggle { bottom: 12px; right: 12px; padding: 8px 12px; font-size: 11px; }

  /* Popularity badges on mobile */
  .rc-pop-badge { font-size: 8px; padding: 2px 6px; gap: 2px; }
  .rc-pop-badge svg { width: 8px; height: 8px; }
  .rc-countdown { font-size: 9px; padding: 3px 6px; }

  /* Limited time section */
  .ltd-section .sec-header { padding: 16px 16px 8px; }
  .ltd-section .hscroll { padding: 0 16px 8px; }

}

/* ═══ PATHWAY CARDS (Step 1 — Quick View) ═══ */
.pathway-section { padding: 0 32px 24px; }
.pathway-section h3 { font-size: 14px; font-weight: 700; margin-bottom: 12px; color: var(--g800); }
.pathway-cards { display: flex; flex-direction: column; gap: 10px; }
.pathway-card {
  border: 1.5px solid var(--g200); border-radius: var(--r-md);
  padding: 16px; cursor: pointer; transition: all 0.15s; position: relative;
}
.pathway-card:hover { border-color: var(--ss-blue-light); box-shadow: var(--sh-sm); }
.pathway-card-type {
  font-size: 10px; font-weight: 700; text-transform: uppercase;
  letter-spacing: 0.5px; color: var(--g400); margin-bottom: 6px;
}
.pathway-card-headline { font-size: 14px; font-weight: 700; color: var(--g900); margin-bottom: 4px; }
.pathway-card-meta {
  display: flex; align-items: center; gap: 8px; font-size: 12px; color: var(--g500);
}
.pathway-card-meta .pcm-credits { font-weight: 700; color: var(--ss-blue); }
.pathway-card-meta .pcm-topup { font-weight: 700; color: var(--ss-green); }
.pathway-card-arrow {
  position: absolute; right: 16px; top: 50%; transform: translateY(-50%);
  font-size: 14px; color: var(--g400);
}
.pathway-card:hover .pathway-card-arrow { color: var(--ss-blue); }
.pathway-badge-best {
  position: absolute; top: -1px; right: -1px;
  background: var(--ss-green); color: #fff; font-size: 9px; font-weight: 800;
  padding: 4px 10px; border-radius: 0 var(--r-md) 0 var(--r-md);
  text-transform: uppercase; letter-spacing: 0.3px;
}

/* ═══ PATHWAY DETAIL (Step 2) ═══ */
.pw-detail-view { padding: 24px 32px; }
.pw-back {
  display: inline-flex; align-items: center; gap: 6px;
  font-size: 13px; color: var(--ss-blue); font-weight: 600;
  background: none; border: none; padding: 0; margin-bottom: 16px; cursor: pointer;
}
.pw-back:hover { text-decoration: underline; }
.pw-reward-mini {
  display: flex; align-items: center; gap: 12px;
  padding: 12px 16px; background: var(--g50); border-radius: var(--r-md); margin-bottom: 20px;
}
.pw-reward-mini-emoji { font-size: 28px; }
.pw-reward-mini-info { flex: 1; }
.pw-reward-mini-name { font-size: 13px; font-weight: 600; color: var(--g700); }
.pw-reward-mini-value { font-size: 16px; font-weight: 800; color: var(--ss-blue); }
.pw-steps { display: flex; flex-direction: column; gap: 0; margin-bottom: 20px; }
.pw-step {
  padding: 16px 16px 16px 24px; border-left: 3px solid var(--ss-blue);
  position: relative; margin-left: 12px;
}
.pw-step:last-child { border-left-color: var(--ss-green); }
.pw-step-dot {
  position: absolute; left: -10px; top: 16px;
  width: 17px; height: 17px; border-radius: 50%;
  background: var(--ss-blue); color: #fff;
  font-size: 9px; font-weight: 800;
  display: flex; align-items: center; justify-content: center;
}
.pw-step:last-child .pw-step-dot { background: var(--ss-green); }
.pw-step-title { font-size: 13px; font-weight: 700; color: var(--g800); margin-bottom: 6px; }
.pw-step-details { font-size: 12px; color: var(--g500); line-height: 1.6; }
.pw-step-details strong { color: var(--g700); }
.pw-welcome-offer { background: linear-gradient(135deg, #fff7ed, #fef3c7); border: 1px solid #f59e0b; border-radius: 8px; padding: 8px 12px; margin: 8px 0; font-size: 12px; font-weight: 600; color: #92400e; }
.pw-card-cta {
  display: block; width: 100%; padding: 10px; border-radius: var(--r-md);
  background: var(--ss-blue); color: #fff; border: none;
  font-size: 13px; font-weight: 700; cursor: pointer; margin-top: 10px; text-align: center;
}
.pw-card-cta:hover { background: var(--ss-blue-hover); }
.pw-all-pathways {
  text-align: center; font-size: 12px; color: var(--g500); margin-top: 12px;
}
.pw-all-pathways a { color: var(--ss-blue); font-weight: 600; cursor: pointer; }
.pw-all-pathways a:hover { text-decoration: underline; }

/* ═══ RESPONSIVE — SMALL PHONE (≤480px) ═══ */
@media (max-width: 480px) {
  .hero h1 { font-size: 20px; }
  .hero p { font-size: 12px; }
  .hero-stats { gap: 12px; flex-wrap: wrap; justify-content: center; }
  .hero-stat .hs-num { font-size: 16px; }
  .hero-stat .hs-label { font-size: 10px; }

  .card-grid { grid-template-columns: repeat(2, 1fr); gap: 8px; }
  .rcard .rc-visual { height: 100px; font-size: 30px; padding: 24px 8px 8px; }
  .rc-visual img { max-height: 60px; }
  .rcard .rc-body { padding: 8px 10px 10px; }
  .rcard .rc-value { font-size: 16px; }
  .rcard .rc-name { font-size: 10px; min-height: 24px; -webkit-line-clamp: 1; }
  .rcard .rc-brand { font-size: 9px; }
  .rcard .rc-effort { font-size: 9px; padding: 2px 6px; }
  .rcard .rc-ful-icon { display: none; }
  .rcard .rc-badge { font-size: 8px; padding: 2px 6px; }
  .rcard .rc-act { width: 24px; height: 24px; font-size: 11px; }

  .hscroll .rcard { flex: 0 0 150px; }
  .sec-header h2 { font-size: 15px; }
  .sec-header .sec-link { font-size: 12px; }

  .compare-bar { flex-wrap: wrap; padding: 10px 12px; gap: 8px; }
  .cb-label { font-size: 12px; }
  .cb-items { order: 3; width: 100%; }
  .compare-btn { flex: 1; padding: 10px; font-size: 13px; }

  .modal-info .mi-value { font-size: 24px; }
  .md-grid { grid-template-columns: 1fr; }

  .toolbar { gap: 6px; }
  .toolbar select { flex: 1; min-width: 0; }
  .result-count { font-size: 12px; }

  .active-filters { margin-bottom: 8px; }
  .active-pill { font-size: 10px; padding: 3px 8px; }

  /* Pathway mobile overrides */
  .pathway-section { padding: 0 20px 20px; }
  .pathway-card { padding: 14px; }
  .pw-detail-view { padding: 20px; }
  .pw-step { padding: 12px 12px 12px 20px; margin-left: 10px; }
}
</style>
</head>
<body>

<!-- ═══ PASSWORD GATE ═══ -->
<div id="pw-gate" style="position:fixed;inset:0;z-index:99999;background:#fff;display:flex;align-items:center;justify-content:center;font-family:'Albert Sans',sans-serif;">
  <div style="text-align:center;max-width:340px;padding:24px;">
    <div style="font-size:40px;margin-bottom:16px;">🔒</div>
    <h2 style="font-size:20px;font-weight:800;color:#171717;margin-bottom:4px;">SingSaver Rewards Marketplace</h2>
    <p style="font-size:13px;color:#737373;margin-bottom:20px;">Internal preview — enter password to continue</p>
    <input id="pw-input" type="password" placeholder="Password" style="width:100%;padding:12px 16px;border:1.5px solid #E5E5E5;border-radius:10px;font-size:15px;font-family:inherit;outline:none;transition:border-color 0.15s;" onfocus="this.style.borderColor='#04709B'" onblur="this.style.borderColor='#E5E5E5'">
    <div id="pw-error" style="color:#DC2626;font-size:12px;margin-top:8px;display:none;">Incorrect password</div>
    <button onclick="checkPw()" style="width:100%;margin-top:12px;padding:12px;border:none;border-radius:10px;background:#04709B;color:#fff;font-size:14px;font-weight:700;cursor:pointer;font-family:inherit;">Enter</button>
  </div>
</div>
<script>
(function(){
  if(sessionStorage.getItem('ss-rw-auth')==='1'){document.getElementById('pw-gate').style.display='none';}
  document.getElementById('pw-input').addEventListener('keydown',function(e){if(e.key==='Enter')checkPw();});
})();
function checkPw(){
  if(document.getElementById('pw-input').value==='rewards2026'){
    sessionStorage.setItem('ss-rw-auth','1');
    document.getElementById('pw-gate').style.display='none';
  } else {
    document.getElementById('pw-error').style.display='block';
    document.getElementById('pw-input').style.borderColor='#DC2626';
  }
}
</script>

<!-- ═══════════════════════════════════════════
     REWARDS CATALOGUE LANDING
     ═══════════════════════════════════════════ -->
<div id="s1">

  <!-- Product header -->
  <div class="header-bar anno" data-anno="COMPONENT: Header Bar">
    <div class="hb-logo"><img src="data:image/png;base64,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" alt="SingSaver" /></div>
    <div class="hb-nav">
      <a href="#">Credit Cards</a>
      <a href="#">Insurance</a>
      <a href="#">Loans</a>
      <a href="#" class="active">Rewards</a>
      <a href="#">Investments</a>
    </div>
    <div class="hb-right">
      <button class="hb-saved" id="saved-count-btn" onclick="showSaved()">&#9829; Saved <span id="saved-count">0</span></button>
      <div class="hb-profile" id="hb-profile">
        <button class="hb-avatar" onclick="toggleProfileDropdown()" title="My Account">JT</button>
        <span class="hb-streak-dot" id="streak-dot">&#128293;</span>
        <div class="profile-dropdown" id="profile-dropdown">
          <div class="pd-header">
            <div class="pd-user">
              <div class="pd-user-avatar">JT</div>
              <div class="pd-user-info">
                <h4>Jia Ting</h4>
                <p>jt.rewards@gmail.com</p>
              </div>
            </div>
            <div class="pd-credits">
              <div><div class="pd-credits-label">Available Credits</div></div>
              <div class="pd-credits-value">1,250</div>
            </div>
          </div>
          <div class="pd-checkin" id="pd-checkin">
            <div class="pd-checkin-title">
              <h5>Daily Check-in</h5>
              <span class="pd-streak-badge" id="streak-badge">&#128293; <span id="streak-count">4</span>-day streak</span>
            </div>
            <div class="pd-days" id="pd-days">
              <div class="pd-day checked"><div class="pd-day-label">Mon</div><div class="pd-day-icon">&#10003;</div><div class="pd-day-reward">+5</div></div>
              <div class="pd-day checked"><div class="pd-day-label">Tue</div><div class="pd-day-icon">&#10003;</div><div class="pd-day-reward">+5</div></div>
              <div class="pd-day checked"><div class="pd-day-label">Wed</div><div class="pd-day-icon">&#10003;</div><div class="pd-day-reward">+5</div></div>
              <div class="pd-day checked"><div class="pd-day-label">Thu</div><div class="pd-day-icon">&#10003;</div><div class="pd-day-reward">+5</div></div>
              <div class="pd-day today"><div class="pd-day-label">Fri</div><div class="pd-day-icon">&#9711;</div><div class="pd-day-reward">+10</div></div>
              <div class="pd-day"><div class="pd-day-label">Sat</div><div class="pd-day-icon">&#9711;</div><div class="pd-day-reward">+5</div></div>
              <div class="pd-day"><div class="pd-day-label">Sun</div><div class="pd-day-icon">&#127873;</div><div class="pd-day-reward">+25</div></div>
            </div>
            <button class="pd-checkin-btn" id="checkin-btn" onclick="dailyCheckIn()">Check In Today (+10 credits)</button>
            <div class="pd-milestone">&#127942; 3 more days to unlock <strong>&nbsp;7-day streak bonus: +50 credits!</strong></div>
          </div>
          <div class="pd-menu">
            <a class="pd-menu-item" href="#">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
              My Profile
            </a>
            <a class="pd-menu-item" href="#">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/><path d="M3 6h18"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>
              My Redemptions
            </a>
            <a class="pd-menu-item" href="#">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5Z"/></svg>
              Streak Settings
            </a>
            <a class="pd-menu-item" href="#">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1Z"/></svg>
              Account Settings
            </a>
            <div class="pd-menu-divider"></div>
            <a class="pd-menu-item" href="#" style="color:var(--red);">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
              Sign Out
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Promo Banner (rotating) -->
  <div class="promo-banner anno" data-anno="BANNER: Rotating promos — deals + surveys + earn methods" id="promo-banner">
    <div class="promo-slide active" data-slide="0">
      <span class="promo-tag">Feb Special</span>
      <span>Redeem any reward this month &amp; get <strong>2x bonus credits</strong> on your next application</span>
      <button class="promo-cta">Claim Now</button>
    </div>
    <div class="promo-slide" data-slide="1">
      <span class="promo-tag">Survey</span>
      <span>Share your opinion on credit cards &amp; earn <strong>50 bonus credits</strong> instantly</span>
      <button class="promo-cta" onclick="document.getElementById('survey-section').scrollIntoView({behavior:'smooth'})">Take Survey</button>
    </div>
    <div class="promo-slide" data-slide="2">
      <span class="promo-tag">Limited</span>
      <span>Apple AirPods Pro now only <strong>380 credits</strong> (was 500) &mdash; ends 28 Feb</span>
      <button class="promo-cta">View Deal</button>
    </div>
    <div class="promo-slide" data-slide="3">
      <span class="promo-tag">Earn</span>
      <span>Refer a friend &amp; you both get <strong>100 credits</strong> when they apply</span>
      <button class="promo-cta" onclick="document.getElementById('refer-section').scrollIntoView({behavior:'smooth'})">Refer Now</button>
    </div>
    <button class="promo-nav prev" onclick="promoNav(-1)">&#8249;</button>
    <button class="promo-nav next" onclick="promoNav(1)">&#8250;</button>
    <div class="promo-dots" id="promo-dots">
      <span class="active"></span><span></span><span></span><span></span>
    </div>
  </div>

  <!-- Hero -->
  <div class="hero anno" data-anno="HERO: Value-prop + search + social proof stats">
    <div class="hero-inner">
      <h1>Pick your reward. It's on us.</h1>
      <p>Earn credits when you apply for financial products through SingSaver. Spend them on rewards you actually want.</p>
      <div class="hero-search">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
        <input type="text" id="hero-search" placeholder="Search e.g. AirPods, Grab, cash, Dyson..." oninput="onHeroSearch()">
      </div>
      <div class="hero-stats">
        <div class="hero-stat"><div class="hs-num" id="stat-total">20</div><div class="hs-label">Rewards</div></div>
        <div class="hero-stat"><div class="hs-num">10</div><div class="hs-label">Brands</div></div>
        <div class="hero-stat"><div class="hs-num">37</div><div class="hs-label">Credit Cards</div></div>
        <div class="hero-stat"><div class="hs-num">8</div><div class="hs-label">Banks</div></div>
      </div>
    </div>
  </div>

  <!-- Full catalogue -->
  <div class="sec-header anno" data-anno="SECTION: Full catalogue with filter sidebar + sort + grid/list">
    <h2>All Rewards</h2>
    <span class="sec-count" id="all-count"></span>
  </div>

  <div class="catalogue" id="catalogue">
    <!-- Sidebar -->
    <div class="sidebar anno" data-anno="COMPONENT: Filter sidebar — 4 facets" id="sidebar-s1"></div>

    <!-- Results -->
    <div class="results">
      <div class="active-filters" id="active-filters"></div>
      <div class="toolbar anno" data-anno="COMPONENT: Toolbar — sort, view toggle, result count">
        <button class="mobile-filter-btn" onclick="openFilterSheet()">&#9776; Filters <span class="mfb-count" id="mfb-count" style="display:none;">0</span></button>
        <select id="sort-s1" onchange="renderGrid()">
          <option value="popular">Popularity</option>
          <option value="newest">Newest</option>
          <option value="price-asc">Price: Low to High</option>
          <option value="price-desc">Price: High to Low</option>
        </select>
        <span class="result-count" id="result-count"></span>
      </div>
      <div id="grid-container" class="card-grid"></div>
      <div id="empty-state" class="empty-state" style="display:none;">
        <div class="es-icon">&#128269;</div>
        <h3>No rewards match your filters</h3>
        <p>Try removing some filters or broadening your search.</p>
        <button onclick="clearAll()">Clear All Filters</button>
      </div>
      <div class="load-more" id="load-more"><button onclick="loadMore()">Show More Rewards</button></div>
    </div>
  </div>

  <!-- Top Picks -->
  <div class="sec-header anno" data-anno="MODULE: Top Picks — personalised (or curated) horizontal scroll">
    <h2>Top Picks For You</h2>
    <span class="sec-count" id="tp-count"></span>
    <a class="sec-link" onclick="document.getElementById('catalogue').scrollIntoView({behavior:'smooth'})">See all &rarr;</a>
  </div>
  <div class="hscroll" id="top-picks"></div>

  <!-- Trending -->
  <div class="sec-header anno" data-anno="MODULE: Trending — editorial / popularity-based">
    <h2>Trending This Week</h2>
    <span class="sec-count"></span>
    <a class="sec-link">See all &rarr;</a>
  </div>
  <div class="hscroll" id="trending"></div>

  <!-- Limited Time Deals -->
  <div class="ltd-section anno" data-anno="MODULE: Limited Time — countdown urgency, drives FOMO conversion">
    <div class="sec-header">
      <h2>Limited Time Deals</h2>
      <span class="ltd-badge-live"><span style="width:6px;height:6px;border-radius:50%;background:#fff;"></span> Live</span>
      <a class="sec-link" onclick="document.getElementById('catalogue').scrollIntoView({behavior:'smooth'})">See all &rarr;</a>
    </div>
    <div class="hscroll" id="ltd-deals"></div>
  </div>

  <!-- Recirculation -->
  <div class="recirc anno" data-anno="MODULE: Recirculation — 'You might also like' based on intent tags">
    <div class="sec-header"><h2>You Might Also Like</h2></div>
    <div class="hscroll" id="recirc-row"></div>
  </div>

  <!-- Take a Survey -->
  <div class="survey-section anno" data-anno="MODULE: Surveys — earning method, credits for opinions" id="survey-section">
    <div class="survey-inner">
      <div class="survey-header">
        <h2>Earn Credits with Quick Surveys</h2>
        <p>Share your opinions on financial products and lifestyle topics. Get rewarded instantly.</p>
      </div>
      <div class="survey-cards">
        <div class="survey-card">
          <div class="survey-card-top">
            <div class="survey-card-icon" style="background:#E0F2FE;">&#128179;</div>
            <span class="survey-card-reward">+50 credits</span>
          </div>
          <h3>Credit Card Preferences Survey</h3>
          <p>Tell us about your ideal credit card features, rewards, and spending habits.</p>
          <div class="survey-card-meta">
            <span>&#9202; 5 min</span>
            <span>&#128200; 12 questions</span>
          </div>
          <button class="survey-card-btn" onclick="openSurvey('creditcard')">Start Survey</button>
        </div>

        <div class="survey-card">
          <div class="survey-card-top">
            <div class="survey-card-icon" style="background:#ECFDF5;">&#127968;</div>
            <span class="survey-card-reward">+80 credits</span>
          </div>
          <h3>Home Insurance Feedback</h3>
          <p>Help us understand what matters most to you when choosing home insurance coverage.</p>
          <div class="survey-card-meta">
            <span>&#9202; 8 min</span>
            <span>&#128200; 18 questions</span>
          </div>
          <button class="survey-card-btn" onclick="openSurvey('insurance')">Start Survey</button>
        </div>

        <div class="survey-card">
          <div class="survey-card-top">
            <div class="survey-card-icon" style="background:#FFF7ED;">&#128176;</div>
            <span class="survey-card-reward">+30 credits</span>
          </div>
          <h3>Savings &amp; Investment Habits</h3>
          <p>Quick poll on how you save and invest. Your insights shape better financial products.</p>
          <div class="survey-card-meta">
            <span>&#9202; 3 min</span>
            <span>&#128200; 8 questions</span>
          </div>
          <button class="survey-card-btn" onclick="openSurvey('savings')">Start Survey</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Content Engagement — Learn & Earn -->
  <div class="content-section anno" data-anno="MODULE: Content Engagement — earn credits by reading articles & watching videos" id="content-section">
    <div class="content-inner">
      <div class="content-header">
        <h2>Learn &amp; Earn</h2>
        <p>Read articles and watch videos about personal finance. Earn credits while getting smarter with your money.</p>
      </div>
      <div class="content-cards">
        <div class="content-card">
          <div class="content-card-thumb" style="background:linear-gradient(135deg,#E0F2FE,#BAE6FD);">
            <span class="content-card-type"><svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg> Article</span>
            <span class="content-card-reward">+15 credits</span>
            &#128179;
          </div>
          <div class="content-card-body">
            <h3>Best Credit Cards for Dining in Singapore 2026</h3>
            <p>Compare the top dining credit cards and find out which one gives you the most cashback per dollar spent.</p>
            <div class="content-card-footer">
              <div class="content-card-meta">
                <span>&#128214; 4 min read</span>
              </div>
              <button class="content-card-btn">Read &amp; Earn</button>
            </div>
          </div>
        </div>

        <div class="content-card">
          <div class="content-card-thumb" style="background:linear-gradient(135deg,#ECFDF5,#A7F3D0);">
            <span class="content-card-type"><svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"/></svg> Video</span>
            <span class="content-card-reward">+25 credits</span>
            &#127912;
          </div>
          <div class="content-card-body">
            <h3>How to Maximise Your SingSaver Rewards</h3>
            <p>A step-by-step video guide on stacking credit card rewards with SingSaver credits for maximum value.</p>
            <div class="content-card-footer">
              <div class="content-card-meta">
                <span>&#9654; 6 min watch</span>
              </div>
              <button class="content-card-btn">Watch &amp; Earn</button>
            </div>
          </div>
        </div>

        <div class="content-card">
          <div class="content-card-thumb" style="background:linear-gradient(135deg,#FFF7ED,#FED7AA);">
            <span class="content-card-type"><svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg> Article</span>
            <span class="content-card-reward">+15 credits</span>
            &#128176;
          </div>
          <div class="content-card-body">
            <h3>5 Insurance Mistakes That Cost You Money</h3>
            <p>Avoid these common pitfalls when choosing health, life, and home insurance in Singapore.</p>
            <div class="content-card-footer">
              <div class="content-card-meta">
                <span>&#128214; 5 min read</span>
              </div>
              <button class="content-card-btn">Read &amp; Earn</button>
            </div>
          </div>
        </div>

        <div class="content-card">
          <div class="content-card-thumb" style="background:linear-gradient(135deg,#E0F4F8,#B2E2ED);">
            <span class="content-card-type"><svg width="10" height="10" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"/></svg> Video</span>
            <span class="content-card-reward">+20 credits</span>
            &#128200;
          </div>
          <div class="content-card-body">
            <h3>Beginner's Guide to Investing in Singapore</h3>
            <p>Learn the basics of robo-advisors, ETFs, and CPF investing in under 5 minutes.</p>
            <div class="content-card-footer">
              <div class="content-card-meta">
                <span>&#9654; 5 min watch</span>
              </div>
              <button class="content-card-btn">Watch &amp; Earn</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Refer & Earn -->
  <div class="refer-section anno" data-anno="MODULE: Refer & Earn — viral loop, both parties earn credits" id="refer-section">
    <div class="refer-inner">
      <div class="refer-icon">&#127873;</div>
      <h2>Invite Friends &amp; Earn Together</h2>
      <p class="refer-subtitle">Share SingSaver Rewards with friends. When they sign up and apply for any product, you both earn credits.</p>
      <p class="refer-highlight">Get 100 credits for every successful referral</p>

      <div class="refer-methods">
        <div class="refer-method">
          <span class="refer-method-label">Share your link</span>
          <input class="refer-link-input" type="text" value="https://singsaver.com.sg/rewards?ref=USER123" readonly id="refer-link">
          <button class="refer-copy-btn" id="refer-copy-btn" onclick="copyReferral()">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
            <span id="copy-label">Copy</span>
          </button>
        </div>

        <div class="refer-method">
          <span class="refer-method-label">Share on social</span>
          <div class="refer-social-btns">
            <button class="refer-social-btn whatsapp" onclick="shareReferral('whatsapp')">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z"/><path d="M12 0C5.373 0 0 5.373 0 12c0 2.126.553 4.122 1.52 5.86L0 24l6.336-1.652A11.95 11.95 0 0012 24c6.627 0 12-5.373 12-12S18.627 0 12 0zm0 21.75c-1.875 0-3.656-.5-5.216-1.441l-.374-.222-3.876 1.012 1.043-3.8-.244-.388A9.72 9.72 0 012.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75z"/></svg>
              WhatsApp
            </button>
            <button class="refer-social-btn telegram" onclick="shareReferral('telegram')">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M11.944 0A12 12 0 000 12a12 12 0 0012 12 12 12 0 0012-12A12 12 0 0012 0h-.056zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 01.171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.479.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/></svg>
              Telegram
            </button>
            <button class="refer-social-btn facebook" onclick="shareReferral('facebook')">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
              Facebook
            </button>
          </div>
        </div>
      </div>

      <p class="refer-terms">By participating in the referral program, you agree to our <a href="#">Referral Program Rules</a>.</p>
    </div>
  </div>
</div>



<!-- ═══ QUICKVIEW MODAL ═══ -->
<div class="modal-overlay" id="qv-overlay" onclick="if(event.target===this)closeQV()">
  <div class="modal" id="qv-modal"></div>
</div>

<!-- ═══ COMPARE MODAL ═══ -->
<div class="compare-overlay" id="cmp-overlay" onclick="if(event.target===this)closeCmp()">
  <div class="compare-modal" id="cmp-modal"></div>
</div>


<!-- ═══ SURVEY MODAL ═══ -->
<div class="survey-overlay" id="survey-overlay" onclick="if(event.target===this)closeSurvey()">
  <div class="survey-modal" id="survey-modal"></div>
</div>

<!-- ═══ MOBILE FILTER SHEET ═══ -->
<div class="filter-sheet-overlay" id="fs-overlay" onclick="closeFilterSheet()"></div>
<div class="filter-sheet" id="filter-sheet">
  <div class="filter-sheet-header">
    <h3>Filters</h3>
    <button class="filter-sheet-close" onclick="closeFilterSheet()">&times;</button>
  </div>
  <div class="filter-sheet-body" id="fs-body"></div>
  <div class="filter-sheet-footer">
    <button class="fs-reset" onclick="clearAll();closeFilterSheet();">Reset</button>
    <button class="fs-apply" onclick="closeFilterSheet()">Show Results</button>
  </div>
</div>

<!-- ═══ COMPARE BAR ═══ -->
<div class="compare-bar" id="compare-bar">
  <span class="cb-label">Compare (<span id="cmp-count">0</span>)</span>
  <div class="cb-items" id="cmp-items"></div>
  <button class="compare-btn" onclick="openCmp()">Compare Now</button>
</div>

<!-- ═══ ANNOTATION TOGGLE ═══ -->
<button class="anno-toggle" onclick="document.body.classList.toggle('show-annos')">&#9998; Toggle Annotations</button>

<script>
// ═══ DATA ═══
const R = [
  {id:1, name:'Dyson Airstrait Straightener', brand:'Dyson', perceivedValue:799, valueTier:'Premium', category:'Hair Care Appliances', subcategory:'Hair Care Appliances', fulfilment:'Physical', effort:'Low', intentTags:['hair-care','premium-lifestyle'], badge:'Hot Pick', emoji:'💇', img:'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/medium_Dyson_Airstrait_straightener_775291f93e.webp', stock:50},
  {id:2, name:'Sony WH-1000XM6 Headphones', brand:'Sony', perceivedValue:649, valueTier:'Premium', category:'Audio Devices', subcategory:'Audio Devices', fulfilment:'Physical', effort:'Low', intentTags:['audiophile','tech-lover'], badge:'Best Seller', emoji:'🎧', img:'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/small_Sony_WH_1000_XM_6_4a4c26efaa.webp', stock:40},
  {id:3, name:'Apple Watch Ultra 3', brand:'Apple', perceivedValue:1199, valueTier:'Ultra Premium', category:'Wearables', subcategory:'Wearables', fulfilment:'Physical', effort:'Medium', intentTags:['fitness','premium-lifestyle'], badge:'Premium Pick', emoji:'⌚', img:'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/small_Apple_Watch_Ultra_3_0c0c72abff.webp', stock:20},
  {id:4, name:'Apple Watch Series 11 GPS+Cell', brand:'Apple', perceivedValue:739, valueTier:'Premium', category:'Wearables', subcategory:'Wearables', fulfilment:'Physical', effort:'Low', intentTags:['fitness','everyday-tech'], badge:null, emoji:'⌚', img:'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/small_Apple_Watch_Series_11_FINAL_de07fc0a85.webp', stock:35},
  {id:5, name:'Apple Watch Series 11 GPS', brand:'Apple', perceivedValue:599, valueTier:'High', category:'Wearables', subcategory:'Wearables', fulfilment:'Physical', effort:'Low', intentTags:['fitness','everyday-tech'], badge:null, emoji:'⌚', img:'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/small_Apple_Watch_Series_11_FINAL_de07fc0a85.webp', stock:45},
  {id:6, name:'Apple Watch SE 3 GPS', brand:'Apple', perceivedValue:349, valueTier:'Mid', category:'Wearables', subcategory:'Wearables', fulfilment:'Physical', effort:'Very Low', intentTags:['budget-smart','fitness'], badge:'Best Value', emoji:'⌚', img:'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/small_Apple_Watch_SE_3_FINAL_8106bb0db0.webp', stock:60},
  {id:7, name:'Apple Watch SE 3 GPS+Cell', brand:'Apple', perceivedValue:419, valueTier:'Mid', category:'Wearables', subcategory:'Wearables', fulfilment:'Physical', effort:'Very Low', intentTags:['budget-smart','fitness'], badge:null, emoji:'⌚', img:'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/small_Apple_Watch_SE_3_FINAL_8106bb0db0.webp', stock:50},
  {id:8, name:'Nintendo Switch 2', brand:'Nintendo', perceivedValue:719, valueTier:'Premium', category:'Gaming', subcategory:'Gaming', fulfilment:'Physical', effort:'Low', intentTags:['gamer','family-fun'], badge:'Most Wanted', emoji:'🎮', img:'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/large_Nintendo_Switch_2_4040465efe.webp', stock:25},
  {id:9, name:'Dyson Digital Slim Submarine', brand:'Dyson', perceivedValue:699, valueTier:'Premium', category:'Vacuum', subcategory:'Vacuum', fulfilment:'Physical', effort:'Low', intentTags:['home-owner','clean-freak'], badge:null, emoji:'🏠', img:'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/small_Dyson_Digtal_Slim_Submarine_020b473e2b.webp', stock:30},
  {id:10, name:'Dyson Airwrap', brand:'Dyson', perceivedValue:799, valueTier:'Premium', category:'Hair Care Appliances', subcategory:'Hair Care Appliances', fulfilment:'Physical', effort:'Low', intentTags:['hair-care','premium-lifestyle'], badge:'Hot Pick', emoji:'💇', img:'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/medium_Dyson_Airwrap_178ba4935a.webp', stock:35},
  {id:11, name:'Apple AirPods 4', brand:'Apple', perceivedValue:199, valueTier:'Mid', category:'Audio Devices', subcategory:'Audio Devices', fulfilment:'Physical', effort:'Very Low', intentTags:['everyday-tech','audiophile'], badge:'Easy Win', emoji:'🎧', img:'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/small_Apple_Air_Pods_4_11ff87c2b9.webp', stock:80},
  {id:12, name:'Samsonite Luggage Spinner', brand:'Samsonite', perceivedValue:600, valueTier:'High', category:'Travel Gear', subcategory:'Travel Gear', fulfilment:'Physical', effort:'Low', intentTags:['traveller','premium-lifestyle'], badge:null, emoji:'🧳', img:'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/small_Samsonite_Straren_Spinner_67_24_3c17768656.webp', stock:40},
  {id:13, name:'Xiaomi Truclean W20 Vacuum', brand:'Xiaomi', perceivedValue:259, valueTier:'Mid', category:'Vacuum', subcategory:'Vacuum', fulfilment:'Physical', effort:'Very Low', intentTags:['home-owner','budget-smart'], badge:'Best Value', emoji:'🏠', img:null, stock:55},
  {id:14, name:'25,000 HeyMax Miles', brand:'HeyMax', perceivedValue:450, valueTier:'High', category:'Miles & Points', subcategory:'Airline Miles', fulfilment:'Digital', effort:'Very Low', intentTags:['miles-collector','traveller'], badge:'Popular', emoji:'✈️', img:'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/small_Heymax_50214266f2.webp', stock:999},
  {id:15, name:'12,000 HeyMax Miles', brand:'HeyMax', perceivedValue:216, valueTier:'Mid', category:'Miles & Points', subcategory:'Airline Miles', fulfilment:'Digital', effort:'Very Low', intentTags:['miles-collector','budget-smart'], badge:null, emoji:'✈️', img:'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/small_Heymax_50214266f2.webp', stock:999},
  {id:16, name:'55,000 HeyMax Miles', brand:'HeyMax', perceivedValue:990, valueTier:'Ultra Premium', category:'Miles & Points', subcategory:'Airline Miles', fulfilment:'Digital', effort:'Medium', intentTags:['miles-collector','premium-lifestyle'], badge:'Premium Pick', emoji:'✈️', img:'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/small_Heymax_50214266f2.webp', stock:999},
  {id:17, name:'PayNow Cash (up to $888)', brand:'PayNow', perceivedValue:888, valueTier:'Premium', category:'Cash Rewards', subcategory:'Cash', fulfilment:'Cash', effort:'Very Low', intentTags:['cashback-lover','practical'], badge:'Most Popular', emoji:'💰', img:'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/small_bltdb157d9e2a0237f3_desktop_3e439d3bb3.webp', stock:999},
  {id:18, name:'$175 eCapitaVoucher', brand:'eCapitaVoucher', perceivedValue:175, valueTier:'Low', category:'Vouchers', subcategory:'Shopping', fulfilment:'Digital', effort:'Very Low', intentTags:['shopper','budget-smart'], badge:null, emoji:'🛍️', img:'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/small_e_Capita_Voucher_2025_de37086e01.webp', stock:200},
  {id:19, name:'$370 Grab Voucher', brand:'Grab', perceivedValue:370, valueTier:'Mid', category:'Vouchers', subcategory:'Ride-Hailing & Delivery', fulfilment:'Digital', effort:'Very Low', intentTags:['everyday-spender','convenience-seeker'], badge:null, emoji:'🚗', img:'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/small_Grab_Logo_360p_967a616d5d.webp', stock:150},
  {id:20, name:'$250 Cash + Xiaomi Luggage', brand:'Xiaomi', perceivedValue:449, valueTier:'High', category:'Travel Gear', subcategory:'Travel Gear', fulfilment:'Physical', effort:'Low', intentTags:['traveller','budget-smart'], badge:'Bundle Deal', emoji:'🧳', img:null, stock:40}
];

// ═══ STATE ═══
let st = {
  catView: 'grid',
  sort: 'value-desc',
  catSort: 'value-desc',
  filters: { cat: [], ful: [], effort: [], brand: [], subcat: [], badge: [] },
  priceMin: 0, priceMax: 99999,
  search: '',
  compare: [],
  bookmarks: new Set(),
  showSavedOnly: false,
  pageSize: 24,
  page: 1,
  s2Cat: null,
  s2Sub: null,
};

// ═══ HELPERS ═══
const rImg = (item, size) => item.img ? `<img src="${item.img}" alt="${item.name}" onerror="this.outerHTML='<span style=\\'font-size:${size||44}px\\'>${item.emoji}</span>'">`  : `<span style="font-size:${size||44}px">${item.emoji}</span>`;
const fmt = v => '$' + Math.round(v).toLocaleString();
const effCls = e => ({'Very Low':'eff-vl','Low':'eff-l','Medium':'eff-m','Medium-High':'eff-mh','High':'eff-h'})[e]||'eff-m';
const bgCls = f => f==='Cash'?'cash-bg':f==='Digital'?'digital-bg':'physical-bg';
const effortOrder = {'Very Low':0,'Low':1,'Medium':2,'Medium-High':3,'High':4,'Unknown':5};

// ═══ SINGSAVER CREDIT CARDS DATA ═══
const CARDS = [
  // CIMB (3)
  {id:'cimb1', name:'CIMB Visa Signature', bank:'CIMB', icon:'\uD83D\uDCB3', minSpend:'$108 in 30 days', eligibility:'New CIMB customer only', selling:'10% cashback on online shopping, groceries & transport', url:'https://www.singsaver.com.sg/credit-card/products/cimb-visa-signature-card', campaign:'2 Jan \u2013 1 Mar 2026', welcomeOffer:'Up to $188 cashback'},
  {id:'cimb2', name:'CIMB Platinum Mastercard', bank:'CIMB', icon:'\uD83D\uDCB3', minSpend:'$108 in 30 days', eligibility:'New CIMB customer only', selling:'10% cashback on all spend, no min income', url:'https://www.singsaver.com.sg/credit-card/cimb', campaign:'2 Jan \u2013 1 Mar 2026'},
  {id:'cimb3', name:'CIMB World Mastercard', bank:'CIMB', icon:'\uD83D\uDCB3', minSpend:'$108 in 30 days', eligibility:'New CIMB customer only', selling:'Unlimited 0.2% cashback, premium airport lounge', url:'https://www.singsaver.com.sg/credit-card/products/cimb-world-mastercard', campaign:'2 Jan \u2013 1 Mar 2026', welcomeOffer:'Up to $188 cashback'},
  // Citibank (6)
  {id:'citi1', name:'Citi PremierMiles Card', bank:'Citibank', icon:'\u2708\uFE0F', minSpend:'$500 in 30 days', eligibility:'New Citi cardmember', selling:'1.2 miles per $1 overseas, Changi lounge access', url:'https://www.singsaver.com.sg/credit-card/products/citi-premier-miles-card', campaign:'2 Jan \u2013 1 Mar 2026'},
  {id:'citi2', name:'Citi Cash Back+ Card', bank:'Citibank', icon:'\uD83D\uDCB3', minSpend:'$500 in 30 days', eligibility:'New Citi cardmember', selling:'1.6% unlimited cashback on everything', url:'https://www.singsaver.com.sg/credit-card/products/citi-cash-back-plus-card', campaign:'2 Jan \u2013 1 Mar 2026'},
  {id:'citi3', name:'Citi Rewards Card', bank:'Citibank', icon:'\uD83D\uDCB3', minSpend:'$500 in 30 days', eligibility:'New Citi cardmember', selling:'10X points on online shopping & dept stores', url:'https://www.singsaver.com.sg/credit-card/products/citi-rewards-card', campaign:'2 Jan \u2013 1 Mar 2026', welcomeOffer:'40,000 ThankYou Points (~$96)'},
  {id:'citi4', name:'Citi SMRT Card', bank:'Citibank', icon:'\uD83D\uDE87', minSpend:'$500 in 30 days', eligibility:'New Citi cardmember', selling:'Auto EZ-Link top-up, 5% cashback on transport', url:'https://www.singsaver.com.sg/credit-card/products/citi-smrt-card', campaign:'2 Jan \u2013 1 Mar 2026'},
  {id:'citi5', name:'Citi M1 Card', bank:'Citibank', icon:'\uD83D\uDCF1', minSpend:'$500 in 30 days', eligibility:'New Citi cardmember', selling:'10% off M1 bill, bonus data, 10X points', url:'https://www.singsaver.com.sg/credit-card/products/citibank-m1-platinum-visa-card', campaign:'2 Jan \u2013 1 Mar 2026'},
  {id:'citi6', name:'Citi Cash Back Card', bank:'Citibank', icon:'\uD83D\uDCB3', minSpend:'$500 in 30 days', eligibility:'New Citi cardmember', selling:'8% cashback on groceries & dining', url:'https://www.singsaver.com.sg/credit-card/products/citi-cash-back-card', campaign:'2 Jan \u2013 1 Mar 2026'},
  // HSBC (4)
  {id:'hsbc1', name:'HSBC TravelOne Credit Card', bank:'HSBC', icon:'\u2708\uFE0F', minSpend:'$500 in 30 days', eligibility:'New HSBC cardmember', selling:'3% overseas cashback, no forex fee, lounge access', url:'https://www.singsaver.com.sg/credit-card/products/hsbc-travelone-credit-card', campaign:'2 Jan \u2013 1 Mar 2026', welcomeOffer:'36,000 welcome miles'},
  {id:'hsbc2', name:'HSBC Revolution Credit Card', bank:'HSBC', icon:'\uD83D\uDCB3', minSpend:'$500 in 30 days', eligibility:'New HSBC cardmember', selling:'4 mpd online, contactless & overseas, no min income', url:'https://www.singsaver.com.sg/credit-card/products/hsbc-revolution-credit-card', campaign:'2 Jan \u2013 1 Mar 2026', welcomeOffer:'Samsonite luggage (worth $680) or $200 cashback'},
  {id:'hsbc3', name:'HSBC Advance Credit Card', bank:'HSBC', icon:'\uD83D\uDCB3', minSpend:'$500 in 30 days', eligibility:'New HSBC cardmember', selling:'5X rewards on groceries, dining, transport & telco', url:'https://www.singsaver.com.sg/credit-card/products/hsbc-advance-credit-card', campaign:'2 Jan \u2013 1 Mar 2026'},
  {id:'hsbc4', name:'HSBC Live+ Credit Card', bank:'HSBC', icon:'\uD83D\uDCB3', minSpend:'$500 in 30 days', eligibility:'New HSBC cardmember', selling:'8% cashback on entertainment, dining & online shopping', url:'https://www.singsaver.com.sg/credit-card/products/hsbc-live-plus-credit-card', campaign:'2 Jan \u2013 1 Mar 2026'},
  // DBS/POSB (6)
  {id:'dbs1', name:'POSB Everyday Card', bank:'DBS/POSB', icon:'\uD83D\uDCB3', minSpend:'$500 in 30 days', eligibility:'New DBS/POSB cardmember', selling:'Up to 8% cashback at NTUC, Sheng Siong, Shell', url:'https://www.singsaver.com.sg/credit-card/products/posb-everyday-card', campaign:'2 Jan \u2013 1 Mar 2026'},
  {id:'dbs2', name:'DBS yuu American Express Card', bank:'DBS/POSB', icon:'\uD83D\uDCB3', minSpend:'$500 in 30 days', eligibility:'New DBS/POSB cardmember', selling:'8X yuu points at Cold Storage, Giant, Guardian', url:'https://www.singsaver.com.sg/credit-card/products/dbs-yuu-american-express-card', campaign:'2 Jan \u2013 1 Mar 2026'},
  {id:'dbs3', name:'DBS yuu Visa Card', bank:'DBS/POSB', icon:'\uD83D\uDCB3', minSpend:'$500 in 30 days', eligibility:'New DBS/POSB cardmember', selling:'4X yuu points + Visa contactless convenience', url:'https://www.singsaver.com.sg/credit-card/products/dbs-yuu-visa-card', campaign:'2 Jan \u2013 1 Mar 2026'},
  {id:'dbs4', name:'DBS Altitude American Express Card', bank:'DBS/POSB', icon:'\u2708\uFE0F', minSpend:'$500 in 30 days', eligibility:'New DBS/POSB cardmember', selling:'3 mpd overseas, 2 mpd online, annual fee waiver', url:'https://www.singsaver.com.sg/credit-card/products/dbs-altitude-american-express-card', campaign:'2 Jan \u2013 1 Mar 2026'},
  {id:'dbs5', name:'DBS Altitude Visa Signature Card', bank:'DBS/POSB', icon:'\u2708\uFE0F', minSpend:'$500 in 30 days', eligibility:'New DBS/POSB cardmember', selling:'2 mpd overseas, 1.2 mpd local, lounge access', url:'https://www.singsaver.com.sg/credit-card/products/dbs-altitude-visa-signature-card', campaign:'2 Jan \u2013 1 Mar 2026'},
  {id:'dbs6', name:'DBS Live Fresh Card', bank:'DBS/POSB', icon:'\uD83D\uDCB3', minSpend:'$500 in 30 days', eligibility:'New DBS/POSB cardmember', selling:'5% cashback on online & contactless, no min income', url:'https://www.singsaver.com.sg/credit-card/products/dbs-live-fresh-card', campaign:'2 Jan \u2013 1 Mar 2026'},
  // OCBC (5)
  {id:'ocbc1', name:'OCBC 365 Credit Card', bank:'OCBC', icon:'\uD83D\uDCB3', minSpend:'$500 in 30 days', eligibility:'New OCBC cardmember', selling:'6% cashback on dining, groceries & online travel', url:'https://www.singsaver.com.sg/credit-card/products/ocbc-365-credit-card', campaign:'2 Jan \u2013 1 Mar 2026'},
  {id:'ocbc2', name:'OCBC INFINITY Cashback Card', bank:'OCBC', icon:'\uD83D\uDCB3', minSpend:'$500 in 30 days', eligibility:'New OCBC cardmember', selling:'1.5% unlimited cashback on everything, no min spend', url:'https://www.singsaver.com.sg/credit-card/products/ocbc-infinity-card', campaign:'2 Jan \u2013 1 Mar 2026'},
  {id:'ocbc3', name:'OCBC Rewards Credit Card', bank:'OCBC', icon:'\uD83D\uDCB3', minSpend:'$500 in 30 days', eligibility:'New OCBC cardmember', selling:'10X points at Takashimaya & selected dept stores', url:'https://www.singsaver.com.sg/credit-card/products/ocbc-rewards-credit-card', campaign:'2 Jan \u2013 1 Mar 2026'},
  {id:'ocbc4', name:'OCBC 90\u00B0N Visa Card', bank:'OCBC', icon:'\u2708\uFE0F', minSpend:'$500 in 30 days', eligibility:'New OCBC cardmember', selling:'2.1 mpd overseas, Visa perks & travel insurance', url:'https://www.singsaver.com.sg/credit-card/products/ocbc-90n-visa-card', campaign:'2 Jan \u2013 1 Mar 2026'},
  {id:'ocbc5', name:'OCBC 90\u00B0N Mastercard', bank:'OCBC', icon:'\u2708\uFE0F', minSpend:'$500 in 30 days', eligibility:'New OCBC cardmember', selling:'2.1 mpd overseas, Mastercard perks & Priority Pass', url:'https://www.singsaver.com.sg/credit-card/products/ocbc-90n-mastercard', campaign:'2 Jan \u2013 1 Mar 2026'},
  // Standard Chartered (2)
  {id:'sc1', name:'SC Simply Cash Card', bank:'Standard Chartered', icon:'\uD83D\uDCB3', minSpend:'$300 in 30 days', eligibility:'New SC cardmember', selling:'1.5% unlimited cashback on all spend', url:'https://www.singsaver.com.sg/credit-card/products/standard-chartered-simply-cash-credit-card', campaign:'2 Jan \u2013 1 Mar 2026'},
  {id:'sc2', name:'SC Journey Credit Card', bank:'Standard Chartered', icon:'\u2708\uFE0F', minSpend:'$300 in 30 days', eligibility:'New SC cardmember', selling:'2.5 mpd overseas, no forex fee', url:'https://www.singsaver.com.sg/credit-card/products/standard-chartered-journey-credit-card', campaign:'2 Jan \u2013 1 Mar 2026', welcomeOffer:'Up to 30,000 welcome miles'},
  // UOB (9)
  {id:'uob1', name:'UOB One Card', bank:'UOB', icon:'\uD83D\uDCB3', minSpend:'$500 in 30 days', eligibility:'New UOB cardmember', selling:'Up to 10% cashback on all spend + 7.8% savings interest', url:'https://www.singsaver.com.sg/credit-card/products/uob-one-card', campaign:'2 Jan \u2013 1 Mar 2026', welcomeOffer:'Stackable with UOB welcome offer'},
  {id:'uob2', name:'UOB Absolute Cashback Card', bank:'UOB', icon:'\uD83D\uDCB3', minSpend:'$500 in 30 days', eligibility:'New UOB cardmember', selling:'1.7% unlimited cashback on everything, no cap', url:'https://www.singsaver.com.sg/credit-card/products/uob-absolute-cashback-card', campaign:'2 Jan \u2013 1 Mar 2026', welcomeOffer:'10% cashback (capped at $250)'},
  {id:'uob3', name:'UOB PRVI Miles Visa', bank:'UOB', icon:'\u2708\uFE0F', minSpend:'$500 in 30 days', eligibility:'New UOB cardmember', selling:'3 mpd overseas, 1.4 mpd local, Visa Infinite perks', url:'https://www.singsaver.com.sg/credit-card/products/uob-prvi-miles-visa-card', campaign:'2 Jan \u2013 1 Mar 2026', welcomeOffer:'Stackable with UOB welcome offer'},
  {id:'uob4', name:'UOB PRVI Miles World Mastercard', bank:'UOB', icon:'\u2708\uFE0F', minSpend:'$500 in 30 days', eligibility:'New UOB cardmember', selling:'3 mpd overseas, Priority Pass lounge, Mastercard benefits', url:'https://www.singsaver.com.sg/credit-card/products/uob-prvi-miles-world-mastercard', campaign:'2 Jan \u2013 1 Mar 2026', welcomeOffer:'Stackable with UOB welcome offer'},
  {id:'uob5', name:'UOB PRVI Miles American Express', bank:'UOB', icon:'\u2708\uFE0F', minSpend:'$500 in 30 days', eligibility:'New UOB cardmember', selling:'3 mpd overseas, 2 mpd local, Amex Offers', url:'https://www.singsaver.com.sg/credit-card/products/uob-prvi-miles-american-express-card', campaign:'2 Jan \u2013 1 Mar 2026', welcomeOffer:'Stackable with UOB welcome offer'},
  {id:'uob6', name:'UOB Lady\'s Card', bank:'UOB', icon:'\uD83D\uDCB3', minSpend:'$500 in 30 days', eligibility:'New UOB cardmember', selling:'10X points on bags, shoes, beauty. ZALORA, Sephora perks', url:'https://www.singsaver.com.sg/credit-card/products/uob-ladys-card', campaign:'2 Jan \u2013 1 Mar 2026', welcomeOffer:'Up to 10 miles per dollar'},
  {id:'uob7', name:'UOB EVOL Card', bank:'UOB', icon:'\uD83D\uDCB3', minSpend:'$500 in 30 days', eligibility:'New UOB cardmember', selling:'8% cashback on mobile, online, contactless. No min income', url:'https://www.singsaver.com.sg/credit-card/products/uob-evol-card', campaign:'2 Jan \u2013 1 Mar 2026', welcomeOffer:'Up to $350 cash credit'},
  {id:'uob8', name:'Singtel-UOB Card', bank:'UOB', icon:'\uD83D\uDCF1', minSpend:'$500 in 30 days', eligibility:'New UOB cardmember', selling:'Up to 20% off Singtel bill, 5% cashback on groceries', url:'https://www.singsaver.com.sg/credit-card/products/uob-singtel-uob-card', campaign:'2 Jan \u2013 1 Mar 2026'},
  {id:'uob9', name:'UOB Visa Signature Card', bank:'UOB', icon:'\uD83D\uDCB3', minSpend:'$500 in 30 days', eligibility:'New UOB cardmember', selling:'10X points on dining, travel & online. Premium perks', url:'https://www.singsaver.com.sg/credit-card/products/uob-visa-signature-card', campaign:'2 Jan \u2013 1 Mar 2026', welcomeOffer:'Stackable with UOB welcome offer'},
  // Trust (2)
  {id:'trust1', name:'Trust Cashback Card', bank:'Trust', icon:'\uD83D\uDCB3', minSpend:'$100 in 30 days', eligibility:'New Trust customer', selling:'Up to 15% cashback on selected merchants, no min income', url:'https://www.singsaver.com.sg/credit-card/products/trust-cashback-credit-card', campaign:'2 Jan \u2013 1 Mar 2026'},
  {id:'trust2', name:'Trust Link Card', bank:'Trust', icon:'\uD83D\uDCB3', minSpend:'$100 in 30 days', eligibility:'New Trust customer', selling:'1% cashback + loyalty points at 30+ partner brands', url:'https://www.singsaver.com.sg/credit-card/products/trust-bank-link-credit-card', campaign:'2 Jan \u2013 1 Mar 2026'}
];

// ═══ REWARD MAP (Bank \u2192 Rewards) ═══
const REWARD_MAP = {
  'CIMB': {
    base: [{rewardId:17, label:'$50 PayNow Cash', value:50}],
    upgrades: [],
    promoCode: null, note:'Stackable with CIMB BAU $188 cashback'
  },
  'Citibank': {
    base: [
      {rewardId:14, label:'25,000 HeyMax Miles', value:450},
      {rewardId:1, label:'Dyson Airstrait Straightener', value:799},
      {rewardId:6, label:'Apple Watch SE 3 GPS', value:349},
      {rewardId:17, label:'$380 PayNow Cash', value:380}
    ],
    upgrades: [
      {rewardId:9, label:'Dyson Digital Slim Submarine', topUp:60, value:699},
      {rewardId:2, label:'Sony WH-1000XM6 Headphones', topUp:60, value:649},
      {rewardId:10, label:'Dyson Airwrap', topUp:100, value:799},
      {rewardId:5, label:'Apple Watch Series 11 GPS', topUp:220, value:599},
      {rewardId:4, label:'Apple Watch Series 11 GPS+Cell', topUp:360, value:739},
      {rewardId:8, label:'Nintendo Switch 2', topUp:300, value:719},
      {rewardId:3, label:'Apple Watch Ultra 3', topUp:800, value:1199}
    ],
    promoCode: null, note: null
  },
  'HSBC': {
    base: [
      {rewardId:14, label:'25,000 HeyMax Miles', value:450},
      {rewardId:1, label:'Dyson Airstrait Straightener', value:799},
      {rewardId:6, label:'Apple Watch SE 3 GPS', value:349},
      {rewardId:17, label:'$350 PayNow Cash', value:350}
    ],
    upgrades: [
      {rewardId:9, label:'Dyson Digital Slim Submarine', topUp:60, value:699},
      {rewardId:2, label:'Sony WH-1000XM6 Headphones', topUp:60, value:649},
      {rewardId:10, label:'Dyson Airwrap', topUp:100, value:799},
      {rewardId:5, label:'Apple Watch Series 11 GPS', topUp:220, value:599},
      {rewardId:4, label:'Apple Watch Series 11 GPS+Cell', topUp:360, value:739},
      {rewardId:8, label:'Nintendo Switch 2', topUp:300, value:719},
      {rewardId:3, label:'Apple Watch Ultra 3', topUp:800, value:1199}
    ],
    promoCode: null, note: null
  },
  'DBS/POSB': {
    base: [
      {rewardId:11, label:'Apple AirPods 4', value:199},
      {rewardId:18, label:'$175 eCapitaVoucher', value:175},
      {rewardId:17, label:'$200 PayNow Cash', value:200}
    ],
    upgrades: [
      {rewardId:13, label:'Xiaomi Truclean W20 Vacuum', topUp:60, value:259},
      {rewardId:6, label:'Apple Watch SE 3 GPS', topUp:150, value:349},
      {rewardId:14, label:'25,000 HeyMax Miles', topUp:250, value:450},
      {rewardId:1, label:'Dyson Airstrait Straightener', topUp:600, value:799},
      {rewardId:20, label:'$250 Cash + Xiaomi Luggage', topUp:250, value:449}
    ],
    promoCode: null, note: null
  },
  'OCBC': {
    base: [
      {rewardId:14, label:'25,000 HeyMax Miles', value:450},
      {rewardId:1, label:'Dyson Airstrait Straightener', value:799},
      {rewardId:6, label:'Apple Watch SE 3 GPS', value:349},
      {rewardId:17, label:'$350 PayNow Cash', value:350}
    ],
    upgrades: [
      {rewardId:9, label:'Dyson Digital Slim Submarine', topUp:60, value:699},
      {rewardId:2, label:'Sony WH-1000XM6 Headphones', topUp:60, value:649},
      {rewardId:10, label:'Dyson Airwrap', topUp:100, value:799},
      {rewardId:5, label:'Apple Watch Series 11 GPS', topUp:220, value:599},
      {rewardId:4, label:'Apple Watch Series 11 GPS+Cell', topUp:360, value:739},
      {rewardId:8, label:'Nintendo Switch 2', topUp:300, value:719},
      {rewardId:3, label:'Apple Watch Ultra 3', topUp:800, value:1199}
    ],
    promoCode: null, note: null
  },
  'Standard Chartered': {
    base: [
      {rewardId:15, label:'12,000 HeyMax Miles', value:216},
      {rewardId:17, label:'$200 PayNow Cash', value:200},
      {rewardId:19, label:'$370 Grab Voucher', value:370}
    ],
    upgrades: [
      {rewardId:1, label:'Dyson Airstrait Straightener', topUp:100, value:799},
      {rewardId:6, label:'Apple Watch SE 3 GPS', topUp:100, value:349},
      {rewardId:14, label:'25,000 HeyMax Miles', topUp:150, value:450},
      {rewardId:12, label:'Samsonite Luggage Spinner', topUp:250, value:600}
    ],
    promoCode: null, note: null
  },
  'UOB': {
    base: [
      {rewardId:14, label:'25,000 HeyMax Miles', value:450},
      {rewardId:1, label:'Dyson Airstrait Straightener', value:799},
      {rewardId:6, label:'Apple Watch SE 3 GPS', value:349},
      {rewardId:17, label:'$350 PayNow Cash', value:350}
    ],
    upgrades: [
      {rewardId:9, label:'Dyson Digital Slim Submarine', topUp:60, value:699},
      {rewardId:2, label:'Sony WH-1000XM6 Headphones', topUp:60, value:649},
      {rewardId:10, label:'Dyson Airwrap', topUp:100, value:799},
      {rewardId:5, label:'Apple Watch Series 11 GPS', topUp:220, value:599},
      {rewardId:4, label:'Apple Watch Series 11 GPS+Cell', topUp:360, value:739},
      {rewardId:8, label:'Nintendo Switch 2', topUp:300, value:719},
      {rewardId:3, label:'Apple Watch Ultra 3', topUp:800, value:1199},
      {rewardId:16, label:'55,000 HeyMax Miles', topUp:500, value:990}
    ],
    promoCode: null, note: null
  },
  'Trust': {
    base: [
      {rewardId:15, label:'12,000 HeyMax Miles', value:216},
      {rewardId:11, label:'Apple AirPods 4', value:199},
      {rewardId:17, label:'$150 PayNow Cash', value:150}
    ],
    upgrades: [
      {rewardId:13, label:'Xiaomi Truclean W20 Vacuum', topUp:60, value:259},
      {rewardId:6, label:'Apple Watch SE 3 GPS', topUp:100, value:349}
    ],
    promoCode: null, note: null
  }
};

// ═══ PATHWAY GENERATION ═══
function getPathways(rewardId) {
  const r = R.find(i => i.id === rewardId);
  if (!r) return [];
  const pathways = [];

  Object.entries(REWARD_MAP).forEach(([bank, data]) => {
    // Check base rewards
    const baseMatch = data.base.find(b => b.rewardId === rewardId);
    if (baseMatch) {
      const cards = CARDS.filter(c => c.bank === bank);
      pathways.push({
        type: 'base', label: `Apply via ${bank}`,
        bank, cards, topUp: 0,
        rewardLabel: baseMatch.label,
        promoCode: data.promoCode, note: data.note
      });
    }
    // Check upgrades
    const upgradeMatch = data.upgrades?.find(u => u.rewardId === rewardId);
    if (upgradeMatch) {
      const cards = CARDS.filter(c => c.bank === bank);
      pathways.push({
        type: 'upgrade', label: `Apply via ${bank} + $${upgradeMatch.topUp} top-up`,
        bank, cards, topUp: upgradeMatch.topUp,
        rewardLabel: upgradeMatch.label,
        promoCode: data.promoCode, note: data.note
      });
    }
  });

  // Sort: base first, then by lowest top-up
  pathways.sort((a, b) => a.topUp - b.topUp);
  if (pathways.length) pathways[0].bestValue = true;
  return pathways;
}

const BANK_LOGOS = {
  'CIMB': 'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/xsmall_blt9a55b5f8f83f8204_0ab275e0da.webp',
  'Citibank': 'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/668_Provider_Citibank_Type_Banking_298cb71c9a.svg',
  'HSBC': 'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/671_Provider_HSBC_Type_Banking_916f3a183a.svg',
  'DBS/POSB': 'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/667_Provider_DBS_Type_Banking_67143c1f85.svg',
  'OCBC': 'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/thumbnail_bltdb79bd5fde0d1ca3_9693c3ffea.webp',
  'Standard Chartered': 'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/677_Provider_Standard_Chartered_Bank_Type_Banking_b6ea243396.svg',
  'UOB': 'https://mhgprod.blob.core.windows.net/singsaver/strapi-uploads/679_Provider_UOB_Type_Banking_43203f57e6.svg',
};

function getCardPathwayHtml(itemId) {
  const pws = getPathways(itemId);
  if (!pws.length) return '';
  const show = pws.slice(0, 2);
  const rest = pws.length - show.length;
  let html = show.map(p => {
    const detail = p.type === 'base' ? '(free gift)' : `+$${p.topUp} top-up`;
    const logo = BANK_LOGOS[p.bank];
    const icon = logo ? `<img class="bank-logo" src="${logo}" alt="${p.bank}">` : '💳';
    return `<div class="rc-pw-line" title="Via ${p.bank}">${icon} via ${p.bank} ${detail}</div>`;
  }).join('');
  if (rest > 0) {
    html += `<span class="rc-pw-more">+${rest}</span>`;
  }
  return html;
}

// ═══ POPULARITY BADGES ═══
// Simulate popularity data — in production this comes from analytics
(function assignPopularity() {
  // Seed a deterministic "random" based on item id for consistency
  const hash = id => ((id * 2654435761) >>> 0) % 1000;
  R.forEach(item => {
    const h = hash(item.id);
    if (h < 30) { item.popBadge = 'most-redeemed'; item.popLabel = 'Most Redeemed'; }
    else if (h < 80) { item.popBadge = 'trending'; item.popLabel = 'Trending'; }
    else if (h < 140) { item.popBadge = 'popular'; item.popLabel = 'Popular'; }
    else if (h < 180) { item.popBadge = 'staff-pick'; item.popLabel = 'Staff Pick'; }
    else { item.popBadge = null; item.popLabel = null; }
  });
})();

// ═══ EXCLUSIVE BADGES ═══
(function assignExclusiveBadges() {
  R.forEach(item => {
    const h = ((item.id * 1597334677) >>> 0) % 100;
    if (h < 12) item.exclusiveBadge = 'SingSaver Exclusive';
    else item.exclusiveBadge = null;
  });
})();

// ═══ LIMITED TIME DEALS — countdown expiry times ═══
const LTD_DEALS = (function() {
  // Pick ~10 items across different categories for limited-time offers
  const candidates = R.filter(r => r.perceivedValue >= 50 && r.perceivedValue <= 500 && r.effort !== 'High');
  const picked = [];
  const usedCats = new Set();
  // Spread across categories
  for (const item of candidates) {
    if (picked.length >= 10) break;
    if (!usedCats.has(item.category) || picked.length > 4) {
      usedCats.add(item.category);
      picked.push(item.id);
    }
  }
  // Assign countdown times (hours from now)
  const now = Date.now();
  const deals = {};
  picked.forEach((id, i) => {
    // Stagger: 2h, 4h, 6h, 8h, 12h, 18h, 24h, 36h, 48h, 72h
    const hours = [2, 4, 6, 8, 12, 18, 24, 36, 48, 72][i] || 24;
    deals[id] = now + hours * 3600000;
  });
  return deals;
})();

const popOrder = {'most-redeemed':0,'trending':1,'popular':2,'staff-pick':3};
function sortItems(items, mode) {
  return [...items].sort((a,b) => {
    if (mode==='popular') {
      const pa = a.popBadge ? popOrder[a.popBadge] : 99;
      const pb = b.popBadge ? popOrder[b.popBadge] : 99;
      if (pa !== pb) return pa - pb;
      return b.perceivedValue - a.perceivedValue;
    }
    if (mode==='newest') return b.id - a.id;
    if (mode==='price-asc') return a.perceivedValue - b.perceivedValue;
    if (mode==='price-desc') return b.perceivedValue - a.perceivedValue;
    return 0;
  });
}

function shuffled(arr) {
  const a=[...arr]; for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];} return a;
}

// ═══ CARD RENDERER ═══
function renderCard(item) {
  const bm = st.bookmarks.has(item.id)?'bookmarked':'';
  const cm = st.compare.includes(item.id)?'compared':'';
  const popHtml = item.popBadge ? `<span class="rc-pop-badge pop-${item.popBadge}"><svg viewBox="0 0 16 16"><path d="M8 0l2.5 5 5.5.8-4 3.9.9 5.3L8 12.5 3.1 15l.9-5.3-4-3.9L5.5 5z"/></svg>${item.popLabel}</span>` : '';
  const hasCountdown = LTD_DEALS[item.id];
  const cdHtml = hasCountdown ? `<div class="rc-countdown" data-expires="${LTD_DEALS[item.id]}"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg><span class="cd-label">Ends in</span> <span class="cd-time" data-cd="${item.id}">--:--:--</span></div>` : '';

  return `<div class="rcard" onclick="openQV(${item.id})">
    <div class="rc-visual ${bgCls(item.fulfilment)}">
      ${popHtml}
      ${item.badge?`<span class="rc-badge ${item.popBadge?'has-pop':''}">${item.badge}</span>`:''}
      <div class="rc-actions">
        <button class="rc-act ${bm}" onclick="event.stopPropagation();toggleBM(${item.id})" title="Save">&#9829;</button>
        <button class="rc-act ${cm}" onclick="event.stopPropagation();toggleCmp(${item.id})" title="Compare">&#43;</button>
      </div>
      ${rImg(item)}
      ${cdHtml}
    </div>
    <div class="rc-body">
      <div class="rc-name">${item.name}</div>
      <div style="font-size:11px;font-weight:600;color:var(--g400);margin-top:2px;">worth ${fmt(item.perceivedValue)}</div>
      <div class="rc-meta">
        ${getCardPathwayHtml(item.id)}
      </div>
    </div>
  </div>`;
}

function renderHCard(item, showCountdown) {
  const popH = item.popBadge ? `<span class="rc-pop-badge pop-${item.popBadge}"><svg viewBox="0 0 16 16"><path d="M8 0l2.5 5 5.5.8-4 3.9.9 5.3L8 12.5 3.1 15l.9-5.3-4-3.9L5.5 5z"/></svg>${item.popLabel}</span>` : '';
  const cdH = showCountdown && LTD_DEALS[item.id] ? `<div class="rc-countdown" data-expires="${LTD_DEALS[item.id]}"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg><span class="cd-label">Ends in</span> <span class="cd-time" data-cd="${item.id}">--:--:--</span></div>` : '';
  return `<div class="rcard" style="flex:0 0 200px;scroll-snap-align:start;" onclick="openQV(${item.id})">
    <div class="rc-visual ${bgCls(item.fulfilment)}" style="height:90px;">
      ${popH}
      ${item.badge?`<span class="rc-badge ${item.popBadge?'has-pop':''}">${item.badge}</span>`:''}
      ${rImg(item)}
      ${cdH}
    </div>
    <div class="rc-body" style="padding:10px 12px;">
      <div class="rc-name" style="font-size:11px;min-height:0;-webkit-line-clamp:1;">${item.name}</div>
      <div class="rc-meta" style="margin-top:4px;">
        ${getCardPathwayHtml(item.id)}
      </div>
    </div>
  </div>`;
}

// ═══ SCREEN 1 INIT ═══
function initS1() {
  // Curated rows
  const topPicks = shuffled(R.filter(r => r.perceivedValue >= 100 && r.perceivedValue <= 600 && ['Tech & Gadgets','Home & Lifestyle'].includes(r.category))).slice(0,15);
  const trending = shuffled(R.filter(r => ['Vouchers','Cash Rewards'].includes(r.category) && r.perceivedValue >= 50)).slice(0,15);
  document.getElementById('top-picks').innerHTML = topPicks.map(renderHCard).join('');
  document.getElementById('tp-count').textContent = topPicks.length + ' curated';
  document.getElementById('trending').innerHTML = trending.map(renderHCard).join('');

  // Limited Time Deals
  const ltdItems = Object.keys(LTD_DEALS).map(id => R.find(r => r.id === Number(id))).filter(Boolean);
  // Sort by expiry soonest first
  ltdItems.sort((a, b) => LTD_DEALS[a.id] - LTD_DEALS[b.id]);
  document.getElementById('ltd-deals').innerHTML = ltdItems.map(item => renderHCard(item, true)).join('');

  // Recirculation
  const recirc = shuffled(R.filter(r => r.perceivedValue >= 200)).slice(0,12);
  document.getElementById('recirc-row').innerHTML = recirc.map(renderHCard).join('');

  // Start countdown timers
  startCountdowns();

  // Sidebar
  buildSidebar();
  renderGrid();
}

function buildSidebar() {
  const cats = [...new Set(R.map(r=>r.category))].sort();
  const brands = [...new Set(R.map(r=>r.brand).filter(Boolean))].sort();
  const badges = ['SingSaver Exclusive'];
  // Count per
  const cCount = c => getFiltered(null,'cat').filter(r=>r.category===c).length;
  const bCount = b => getFiltered(null,'brand').filter(r=>r.brand===b).length;
  const badgeCount = b => getFiltered(null,'badge').filter(r=>r.exclusiveBadge===b).length;

  let sb = '';
  sb += `<div class="filter-section"><div class="filter-title">Category <span class="ft-clear ${st.filters.cat.length?'visible':''}" onclick="clearFilter('cat')">Clear</span></div>`;
  cats.forEach((c, i) => {
    const hidden = i >= 5 ? ' style="display:none" data-cat-extra' : '';
    sb += `<label class="filter-opt"${hidden}><input type="checkbox" data-group="cat" value="${c}" ${st.filters.cat.includes(c)?'checked':''} onchange="onFilter()"> ${c} <span class="fo-count">${cCount(c)}</span></label>`;
  });
  if (cats.length > 5) {
    sb += `<button class="filter-show-more" onclick="this.style.display='none';document.querySelectorAll('[data-cat-extra]').forEach(el=>el.style.display='')">+ ${cats.length - 5} more</button>`;
  }
  sb += '</div>';

  sb += `<div class="filter-section"><div class="filter-title">Brand <span class="ft-clear ${st.filters.brand.length?'visible':''}" onclick="clearFilter('brand')">Clear</span></div><div style="max-height:180px;overflow-y:auto;">`;
  brands.slice(0,25).forEach(b => {
    sb += `<label class="filter-opt"><input type="checkbox" data-group="brand" value="${b}" ${st.filters.brand.includes(b)?'checked':''} onchange="onFilter()"> ${b} <span class="fo-count">${bCount(b)}</span></label>`;
  });
  sb += '</div></div>';

  sb += `<div class="filter-section"><div class="filter-title">Reward Value <span class="ft-clear ${st.priceMin>0||st.priceMax<99999?'visible':''}" onclick="clearPrice()">Clear</span></div>
    <div class="price-slider"><div class="price-inputs">
      <input type="number" id="pmin" placeholder="Min" value="${st.priceMin||''}" min="0">
      <span>—</span>
      <input type="number" id="pmax" placeholder="Max" value="${st.priceMax<99999?st.priceMax:''}" min="0">
    </div>
    <button class="price-apply" onclick="applyPrice()">Apply</button>
  </div></div>`;

  sb += `<div class="filter-section"><div class="filter-title">Product Badge <span class="ft-clear ${st.filters.badge.length?'visible':''}" onclick="clearFilter('badge')">Clear</span></div>`;
  badges.forEach(b => {
    sb += `<label class="filter-opt"><input type="checkbox" data-group="badge" value="${b}" ${st.filters.badge.includes(b)?'checked':''} onchange="onFilter()"> ${b} <span class="fo-count">${badgeCount(b)}</span></label>`;
  });
  sb += '</div>';

  sb += '<button class="sidebar-reset" onclick="clearAll()">Clear All Filters</button>';
  document.getElementById('sidebar-s1').innerHTML = sb;
}

function getFiltered(exclude, group) {
  return R.filter(r => {
    if (st.showSavedOnly && !st.bookmarks.has(r.id)) return false;
    if (group !== 'cat' && st.filters.cat.length && !st.filters.cat.includes(r.category)) return false;
    if (r.perceivedValue < st.priceMin || r.perceivedValue > st.priceMax) return false;
    if (group !== 'ful' && st.filters.ful.length && !st.filters.ful.includes(r.fulfilment)) return false;
    if (group !== 'effort' && st.filters.effort.length && !st.filters.effort.includes(r.effort)) return false;
    if (group !== 'brand' && st.filters.brand.length && !st.filters.brand.includes(r.brand)) return false;
    if (group !== 'badge' && st.filters.badge.length && !st.filters.badge.includes(r.exclusiveBadge)) return false;
    if (st.search && !r.name.toLowerCase().includes(st.search) && !r.brand.toLowerCase().includes(st.search) && !r.category.toLowerCase().includes(st.search) && !r.subcategory.toLowerCase().includes(st.search) && !(r.badge && r.badge.toLowerCase().includes(st.search)) && !r.intentTags.some(t => t.toLowerCase().includes(st.search))) return false;
    return true;
  });
}

function renderGrid() {
  const items = sortItems(getFiltered(), document.getElementById('sort-s1').value);
  const paged = items.slice(0, st.page * st.pageSize);
  const container = document.getElementById('grid-container');
  container.className = 'card-grid';
  container.innerHTML = paged.map(r => renderCard(r)).join('');
  document.getElementById('result-count').textContent = items.length + ' rewards';
  document.getElementById('all-count').textContent = items.length + ' rewards';
  document.getElementById('empty-state').style.display = items.length === 0 ? 'block' : 'none';
  document.getElementById('load-more').style.display = paged.length < items.length ? 'block' : 'none';
  renderActivePills();
}

function renderActivePills() {
  const pills = [];
  Object.entries(st.filters).forEach(([g, vals]) => {
    vals.forEach(v => pills.push(`<span class="active-pill">${v} <span class="ap-x" onclick="removeFilter('${g}','${v}')">&times;</span></span>`));
  });
  if (st.search) {
    pills.push(`<span class="active-pill">Search: "${st.search}" <span class="ap-x" onclick="clearSearch()">&times;</span></span>`);
  }
  if (st.priceMin > 0 || st.priceMax < 99999) {
    const label = st.priceMin > 0 && st.priceMax < 99999 ? `${st.priceMin}–${st.priceMax} credits` : st.priceMin > 0 ? `>${st.priceMin} credits` : `<${st.priceMax} credits`;
    pills.push(`<span class="active-pill">${label} <span class="ap-x" onclick="clearPrice()">&times;</span></span>`);
  }
  if (pills.length > 1) pills.push('<span class="active-pill clear-all-pill" onclick="clearAll()">Clear all &times;</span>');
  document.getElementById('active-filters').innerHTML = pills.join('');
}

// ═══ FILTER HANDLERS ═══
function onFilter() {
  ['cat','ful','effort','brand','badge'].forEach(g => {
    st.filters[g] = [...document.querySelectorAll(`#sidebar-s1 input[data-group="${g}"]:checked`)].map(i=>i.value);
  });
  st.page = 1;
  buildSidebar(); // re-render counts
  renderGrid();
  updateMobileFilterCount();
}
function applyPrice() {
  st.priceMin = parseFloat(document.getElementById('pmin').value) || 0;
  st.priceMax = parseFloat(document.getElementById('pmax').value) || 99999;
  st.page = 1; buildSidebar(); renderGrid();
}
function clearPrice() { st.priceMin = 0; st.priceMax = 99999; buildSidebar(); renderGrid(); }
function removeFilter(g, v) { st.filters[g] = st.filters[g].filter(x => x !== v); buildSidebar(); renderGrid(); }
function clearFilter(g) { st.filters[g] = []; buildSidebar(); renderGrid(); }
function clearAll() { Object.keys(st.filters).forEach(g => st.filters[g]=[]); st.priceMin=0; st.priceMax=99999; st.search=''; document.getElementById('hero-search').value=''; buildSidebar(); renderGrid(); updateMobileFilterCount(); }
function loadMore() { st.page++; renderGrid(); }
function onHeroSearch() { st.search = document.getElementById('hero-search').value.toLowerCase().trim(); st.page = 1; buildSidebar(); renderGrid(); }
function clearSearch() { st.search = ''; document.getElementById('hero-search').value = ''; st.page = 1; buildSidebar(); renderGrid(); }

// ═══ BOOKMARK & COMPARE ═══
function showSaved() {
  st.showSavedOnly = !st.showSavedOnly;
  document.getElementById('saved-count-btn').classList.toggle('active', st.showSavedOnly);
  st.page = 1; renderGrid();
}
function toggleBM(id) {
  if (st.bookmarks.has(id)) st.bookmarks.delete(id); else st.bookmarks.add(id);
  document.getElementById('saved-count').textContent = st.bookmarks.size;
  renderGrid();
}

function toggleCmp(id) {
  const idx = st.compare.indexOf(id);
  if (idx > -1) st.compare.splice(idx,1); else if (st.compare.length < 4) st.compare.push(id);
  updateCmpBar(); renderGrid();
}

function updateCmpBar() {
  const bar = document.getElementById('compare-bar');
  document.getElementById('cmp-count').textContent = st.compare.length;
  if (st.compare.length > 0) {
    bar.classList.add('show');
    document.getElementById('cmp-items').innerHTML = st.compare.map(id => {
      const r = R.find(i=>i.id===id);
      return `<div class="cb-item">${r.img?`<img src="${r.img}" style="width:20px;height:20px;object-fit:contain;vertical-align:middle;">`:r.emoji} ${r.name.slice(0,20)}${r.name.length>20?'...':''} <span class="cbi-x" onclick="toggleCmp(${id})">&times;</span></div>`;
    }).join('');
  } else {
    bar.classList.remove('show');
  }
}

function openCmp() {
  if (st.compare.length < 2) return;
  const items = st.compare.map(id => R.find(i=>i.id===id));
  const bestVal = Math.max(...items.map(i=>i.perceivedValue));
  const bestEffort = Math.min(...items.map(i=>effortOrder[i.effort]||5));
  
  let html = `<button class="modal-close" onclick="closeCmp()">&times;</button><h2>Compare Rewards</h2><table class="ctable">`;
  html += '<tr><th></th>' + items.map(i=>`<th><div class="ct-emoji">${i.img?`<img src="${i.img}" onerror="this.outerHTML='${i.emoji}'">`:i.emoji}</div><div class="ct-value">${fmt(i.perceivedValue)}</div><div class="ct-name">${i.name}</div></th>`).join('') + '</tr>';
  
  const rows = [
    ['Category', i=>i.category],
    ['Sub-Category', i=>i.subcategory],
    ['Brand', i=>i.brand||'—'],
    ['Credit Tier', i=>i.valueTier],
    ['Fulfilment', i=>i.fulfilment],
    ['Effort', i=>i.effort, i=>effortOrder[i.effort]===bestEffort],
    ['Best For', i=>i.intentTags.slice(0,3).join(', ')],
  ];
  rows.forEach(([label, fn, bestFn]) => {
    html += `<tr><td>${label}</td>`;
    items.forEach(i => {
      const best = bestFn && bestFn(i) ? ' ct-best' : '';
      html += `<td class="${best}">${fn(i)}</td>`;
    });
    html += '</tr>';
  });
  html += '</table>';
  
  document.getElementById('cmp-modal').innerHTML = html;
  document.getElementById('cmp-overlay').classList.add('show');
}
function closeCmp() { document.getElementById('cmp-overlay').classList.remove('show'); }

// ═══ QUICKVIEW (SCREEN 3) ═══
function openQV(id) {
  const r = R.find(i=>i.id===id);
  const bm = st.bookmarks.has(id);

  document.getElementById('qv-modal').innerHTML = `
    <button class="modal-close" onclick="closeQV()">&times;</button>
    <div class="modal-hero">
      <div class="modal-emoji ${bgCls(r.fulfilment)}">${rImg(r, 40)}</div>
      <div class="modal-info">
        <h2>${r.brand || r.category}</h2>
        <div class="mi-value">${fmt(r.perceivedValue)}</div>
        <div class="mi-name">${r.name}</div>
      </div>
    </div>
    <div class="modal-tags">
      ${r.popBadge?`<span class="modal-tag" style="background:${{'most-redeemed':'#DC2626','trending':'#EA580C','popular':'#D97706','staff-pick':'var(--ss-blue)'}[r.popBadge]};color:#fff;">&#9733; ${r.popLabel}</span>`:''}
      ${LTD_DEALS[r.id]?`<span class="modal-tag" style="background:#DC2626;color:#fff;">&#9200; Limited Time \u2014 <span class="cd-time" data-cd="${r.id}">--:--:--</span></span>`:''}
      ${r.badge?`<span class="modal-tag mt-badge">${r.badge}</span>`:''}
      <span class="modal-tag mt-ful">${r.valueTier} tier</span>
    </div>
    <div class="modal-details">
      <div class="md-grid">
        <div class="md-item"><label>Category</label><span>${r.category}</span></div>
        <div class="md-item"><label>Brand</label><span>${r.brand||'\u2014'}</span></div>
        <div class="md-item"><label>Value</label><span>${fmt(r.perceivedValue)}</span></div>
      </div>
    </div>
    <div class="pathway-section">
      <h3>How can you get this reward?</h3>
      <div class="pathway-cards">
        ${getPathways(id).map((pw, i) => {
          const cardCount = pw.cards.length;
          const headline = pw.type === 'base'
            ? `<strong>${pw.bank}</strong> \u2014 Base gift (${cardCount} eligible card${cardCount>1?'s':''})`
            : `<strong>${pw.bank}</strong> \u2014 $${pw.topUp} top-up (${cardCount} eligible card${cardCount>1?'s':''})`;
          const bestBadge = pw.bestValue ? `<div class="pathway-badge-best">Best Value</div>` : '';
          return `<div class="pathway-card" onclick="openPathwayDetail(${id},${i})">
            ${bestBadge}
            <div class="pathway-card-type">${pw.type === 'base' ? '\uD83C\uDF81 Base Gift' : '\u2B06\uFE0F Upgrade'}</div>
            <div class="pathway-card-headline">${headline}</div>
            <div class="pathway-card-meta">
              ${pw.topUp > 0 ? `<span class="pcm-topup">+ $${pw.topUp} top-up</span>` : '<span style="color:var(--green);font-weight:700;">No top-up needed</span>'}
              <span>\u00B7</span>
              <span>${cardCount} card${cardCount>1?'s':''} available</span>
            </div>
            ${pw.note ? `<div style="font-size:11px;color:var(--amber);margin-top:4px;">\uD83D\uDCA1 ${pw.note}</div>` : ''}
            <div class="pathway-card-arrow">\u2192</div>
          </div>`;
        }).join('')}
      </div>
    </div>
    <div style="padding:0 32px 20px;">
      <h3 style="font-size:14px;font-weight:700;margin-bottom:8px;">Best for</h3>
      <div style="display:flex;gap:6px;flex-wrap:wrap;">
        ${r.intentTags.map(t=>`<span style="font-size:11px;padding:4px 12px;border-radius:var(--r-full);background:var(--ss-blue-bg);color:var(--ss-blue);font-weight:600;">${t}</span>`).join('')}
      </div>
    </div>
    <div class="modal-footer">
      <button class="mf-save" onclick="toggleBM(${id});openQV(${id});">${bm?'&#9829; Saved':'&#9825; Save'}</button>
      <button class="mf-cta" onclick="openPathwayDetail(${id},0)">See Eligible Cards &rarr;</button>
    </div>
  `;
  document.getElementById('qv-overlay').classList.add('show');
}
function closeQV() { document.getElementById('qv-overlay').classList.remove('show'); }

// ═══ PATHWAY DETAIL VIEW (Step 2) ═══
function openPathwayDetail(rewardId, pathwayIdx) {
  const r = R.find(i => i.id === rewardId);
  const pathways = getPathways(rewardId);
  const pw = pathways[pathwayIdx];
  if (!r || !pw) return;

  // Build card list HTML
  let cardsHtml = pw.cards.map(card => {
    const logo = BANK_LOGOS[card.bank];
    const logoImg = logo ? `<img src="${logo}" style="width:16px;height:16px;object-fit:contain;border-radius:2px;vertical-align:middle;margin-right:4px;">` : '';
    const woHtml = card.welcomeOffer ? `<div class="pw-welcome-offer">\uD83C\uDF81 + Bank Welcome Offer: ${card.welcomeOffer}</div>` : '';
    return `
    <div class="pw-step">
      <div class="pw-step-dot">${card.icon}</div>
      <div class="pw-step-title">${card.name}</div>
      <div class="pw-step-details">
        ${card.selling}<br>
        Min. spend: <strong>${card.minSpend}</strong><br>
        ${card.eligibility}<br>
        Campaign: <strong>${card.campaign}</strong>
      </div>
      ${woHtml}
      <button class="pw-card-cta" onclick="window.open('${card.url}','_blank')">
        ${logoImg}Apply for ${card.name} on SingSaver \u2192
      </button>
    </div>`;
  }).join('');

  // Build steps HTML
  let stepsHtml = `
    <div class="pw-step">
      <div class="pw-step-dot">1</div>
      <div class="pw-step-title">Choose a Card from ${pw.bank}</div>
      <div class="pw-step-details">
        Select one of the <strong>${pw.cards.length} eligible cards</strong> below. Each card earns you a SingSaver exclusive reward when you apply through SingSaver.
      </div>
    </div>
    <div style="padding-left:20px;margin-bottom:16px;">
      ${cardsHtml}
    </div>
    <div class="pw-step">
      <div class="pw-step-dot">2</div>
      <div class="pw-step-title">Apply via SingSaver</div>
      <div class="pw-step-details">
        Min. spend: <strong>${pw.cards[0].minSpend}</strong><br>
        Eligibility: <strong>${pw.cards[0].eligibility}</strong><br>
        ${pw.promoCode ? `Promo code: <strong>${pw.promoCode}</strong><br>` : ''}
        Campaign period: <strong>${pw.cards[0].campaign}</strong>
      </div>
    </div>
    <div class="pw-step">
      <div class="pw-step-dot">3</div>
      <div class="pw-step-title">Receive ${r.name}</div>
      <div class="pw-step-details">
        ${pw.type === 'base' ? 'Base gift \u2014 no extra payment needed' : `Upgrade gift \u2014 pay <strong>$${pw.topUp} top-up</strong>`}<br>
        Fulfilment: <strong>${r.fulfilment === 'Cash' ? 'PayNow (within 14 working days)' : r.fulfilment === 'Digital' ? 'Email delivery (within 14 working days)' : 'Physical delivery (6\u201312 weeks after approval)'}</strong>
      </div>
    </div>`;

  document.getElementById('qv-modal').innerHTML = `
    <button class="modal-close" onclick="closeQV()">&times;</button>
    <div class="pw-detail-view">
      <button class="pw-back" onclick="openQV(${rewardId})">\u2190 Back to pathways</button>
      <div class="pw-reward-mini">
        <div class="pw-reward-mini-emoji">${rImg(r, 28)}</div>
        <div class="pw-reward-mini-info">
          <div class="pw-reward-mini-name">Your path to: ${r.name}</div>
          <div class="pw-reward-mini-value">${fmt(r.perceivedValue)} ${pw.topUp > 0 ? `<span style="font-size:12px;color:var(--orange);">+ $${pw.topUp} top-up</span>` : '<span style="font-size:12px;color:var(--green);">Free gift</span>'}</div>
        </div>
      </div>
      <div class="pw-steps">${stepsHtml}</div>
      <div class="pw-all-pathways">See <a onclick="openQV(${rewardId})">all pathways</a> for this reward</div>
    </div>
  `;
}

// ═══ MOBILE FILTER SHEET ═══
function openFilterSheet() {
  // Clone sidebar content into sheet
  const sidebar = document.getElementById('sidebar-s1');
  document.getElementById('fs-body').innerHTML = sidebar.innerHTML;
  // Re-bind checkbox events to the sheet copies
  document.querySelectorAll('#fs-body input[type="checkbox"]').forEach(cb => {
    cb.addEventListener('change', () => {
      // Sync sheet checkboxes back to state
      ['cat','ful','effort','brand','badge'].forEach(g => {
        st.filters[g] = [...document.querySelectorAll(`#fs-body input[data-group="${g}"]:checked`)].map(i=>i.value);
      });
      renderGrid();
      updateMobileFilterCount();
    });
  });
  // Re-bind price apply
  const priceBtn = document.querySelector('#fs-body .price-apply');
  if (priceBtn) {
    priceBtn.onclick = () => {
      const min = document.querySelector('#fs-body #pmin');
      const max = document.querySelector('#fs-body #pmax');
      st.priceMin = parseFloat(min?.value) || 0;
      st.priceMax = parseFloat(max?.value) || 99999;
      renderGrid();
      updateMobileFilterCount();
    };
  }
  document.getElementById('fs-overlay').classList.add('show');
  document.getElementById('filter-sheet').classList.add('show');
  document.body.style.overflow = 'hidden';
}

function closeFilterSheet() {
  document.getElementById('fs-overlay').classList.remove('show');
  document.getElementById('filter-sheet').classList.remove('show');
  document.body.style.overflow = '';
  buildSidebar(); // sync sidebar state
}

function updateMobileFilterCount() {
  const count = Object.values(st.filters).reduce((sum, arr) => sum + arr.length, 0) + (st.priceMin > 0 || st.priceMax < 99999 ? 1 : 0);
  const badge = document.getElementById('mfb-count');
  if (count > 0) {
    badge.textContent = count;
    badge.style.display = 'inline-flex';
  } else {
    badge.style.display = 'none';
  }
}

// ═══ COUNTDOWN TIMER ═══
function startCountdowns() {
  function tick() {
    const now = Date.now();
    document.querySelectorAll('.cd-time[data-cd]').forEach(el => {
      const id = Number(el.dataset.cd);
      const expires = LTD_DEALS[id];
      if (!expires) return;
      const diff = expires - now;
      if (diff <= 0) {
        el.textContent = 'EXPIRED';
        el.closest('.rc-countdown').style.background = 'rgba(82,82,82,0.9)';
        return;
      }
      const h = Math.floor(diff / 3600000);
      const m = Math.floor((diff % 3600000) / 60000);
      const s = Math.floor((diff % 60000) / 1000);
      if (h >= 24) {
        const d = Math.floor(h / 24);
        const rh = h % 24;
        el.textContent = `${d}d ${rh}h ${String(m).padStart(2,'0')}m`;
      } else {
        el.textContent = `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
      }
    });
  }
  tick();
  setInterval(tick, 1000);
}

// ═══ SURVEY ENGINE ═══
const SURVEYS = {
  creditcard: {
    title: 'Credit Card Preferences Survey',
    subtitle: 'Help us understand your ideal credit card',
    reward: 50,
    questions: [
      { type:'radio', q:'How many credit cards do you currently own?', options:['None','1','2–3','4 or more'] },
      { type:'radio', q:'What is your primary reason for using a credit card?', options:['Cashback rewards','Air miles','Dining perks','Online shopping','Building credit score'] },
      { type:'multi', q:'Which credit card benefits matter most to you? (Select all that apply)', options:['Cashback on groceries','Dining discounts','Travel lounge access','No annual fee','Low interest rate','Rewards points','Fuel savings'] },
      { type:'radio', q:'How much do you typically spend on your credit card per month?', options:['Under $500','$500 – $1,000','$1,000 – $2,000','$2,000 – $5,000','Over $5,000'] },
      { type:'radio', q:'Which card network do you prefer?', options:['Visa','Mastercard','American Express','No preference'] },
      { type:'slider', q:'How important is a no-annual-fee policy to you?', min:1, max:10, minLabel:'Not important', maxLabel:'Very important' },
      { type:'radio', q:'Do you pay off your credit card balance in full each month?', options:['Always','Usually','Sometimes','Rarely'] },
      { type:'multi', q:'Where do you spend the most? (Select up to 3)', options:['Dining','Groceries','Online shopping','Transport','Travel','Entertainment','Bills & utilities'] },
      { type:'radio', q:'Would you consider switching to a new credit card for better rewards?', options:['Yes, definitely','Maybe, depends on the offer','No, I am loyal to my current card'] },
      { type:'slider', q:'How satisfied are you with your current credit card rewards?', min:1, max:10, minLabel:'Very unsatisfied', maxLabel:'Very satisfied' },
      { type:'radio', q:'How do you prefer to redeem your credit card rewards?', options:['Cashback to statement','Gift vouchers','Air miles','Points for merchandise','Charity donations'] },
      { type:'text', q:'Any features you wish your credit card had? (Optional)', placeholder:'E.g. higher cashback cap, better travel insurance...' }
    ]
  },
  insurance: {
    title: 'Home Insurance Feedback',
    subtitle: 'Share what matters when protecting your home',
    reward: 80,
    questions: [
      { type:'radio', q:'Do you currently have home insurance?', options:['Yes – HDB Home Protection','Yes – private insurer','No, but considering it','No, not interested'] },
      { type:'radio', q:'What type of property do you live in?', options:['HDB flat','Condo / apartment','Landed property','Renting'] },
      { type:'multi', q:'What would you want home insurance to cover? (Select all)', options:['Fire damage','Water damage / flooding','Theft & burglary','Personal liability','Renovation damage','Home contents','Temporary accommodation'] },
      { type:'radio', q:'How much would you be willing to pay monthly for home insurance?', options:['Under $10','$10 – $20','$20 – $50','$50 – $100','Over $100'] },
      { type:'slider', q:'How important is home insurance to you?', min:1, max:10, minLabel:'Not important', maxLabel:'Essential' },
      { type:'radio', q:'What is the estimated value of your home contents?', options:['Under $10,000','$10,000 – $30,000','$30,000 – $50,000','$50,000 – $100,000','Over $100,000'] },
      { type:'radio', q:'Have you ever made a home insurance claim?', options:['Yes, it was smooth','Yes, but it was difficult','No, never needed to','No, did not know I could'] },
      { type:'multi', q:'What factors influence your choice of home insurer? (Select top 3)', options:['Lowest premium','Brand reputation','Coverage breadth','Easy claims process','Online management','Bundled discounts','Friend recommendation'] },
      { type:'radio', q:'Would you prefer to buy home insurance online or through an agent?', options:['Fully online','Online with chat support','Through an agent','No preference'] },
      { type:'slider', q:'How well do you understand what your current home insurance covers?', min:1, max:10, minLabel:'Not at all', maxLabel:'Completely' },
      { type:'radio', q:'Would a comparison tool help you choose home insurance?', options:['Yes, very helpful','Somewhat helpful','Not really','I prefer agent advice'] },
      { type:'radio', q:'How often do you review your home insurance policy?', options:['Every year','Every 2–3 years','Only at renewal','Never reviewed it'] },
      { type:'multi', q:'Which add-ons would interest you? (Select all)', options:['Personal accident cover','Domestic helper insurance','Cyber protection','Pet damage cover','Home office equipment','Bicycle / PMD cover'] },
      { type:'radio', q:'Do you bundle home insurance with other insurance products?', options:['Yes, with the same insurer','No, I use different insurers','Did not know I could bundle'] },
      { type:'slider', q:'How likely are you to switch home insurers for a better deal?', min:1, max:10, minLabel:'Very unlikely', maxLabel:'Very likely' },
      { type:'radio', q:'What would make you switch home insurance providers?', options:['Lower price','Better coverage','Faster claims','Better app / portal','Cashback or rewards'] },
      { type:'radio', q:'Would you pay more for faster claim processing (48h guarantee)?', options:['Yes','Maybe','No'] },
      { type:'text', q:'Any other feedback about home insurance in Singapore? (Optional)', placeholder:'E.g. pain points, wishlist features...' }
    ]
  },
  savings: {
    title: 'Savings & Investment Habits',
    subtitle: 'A quick poll on how you save and invest',
    reward: 30,
    questions: [
      { type:'radio', q:'How would you describe your saving habits?', options:['I save consistently every month','I save when I can','I struggle to save','I don\'t actively save'] },
      { type:'radio', q:'What percentage of your monthly income do you save?', options:['Less than 10%','10% – 20%','20% – 30%','30% – 50%','More than 50%'] },
      { type:'multi', q:'Where do you keep your savings? (Select all)', options:['Regular savings account','High-interest savings account','Fixed deposit','Cash at home','CPF top-ups','Robo-advisors','Stocks / ETFs'] },
      { type:'radio', q:'Do you currently invest?', options:['Yes, actively','Yes, passively (robo-advisor / ETF)','No, but interested','No, not interested'] },
      { type:'slider', q:'How would you rate your financial literacy?', min:1, max:10, minLabel:'Beginner', maxLabel:'Expert' },
      { type:'radio', q:'What is your biggest barrier to investing?', options:['Don\'t know where to start','Fear of losing money','Not enough capital','Too time-consuming','I already invest'] },
      { type:'multi', q:'What financial content would you like to learn about? (Select all)', options:['Budgeting basics','CPF optimisation','Stock market investing','Property investment','Insurance planning','Retirement planning','Crypto / alternative assets'] },
      { type:'text', q:'What one financial goal are you working toward right now? (Optional)', placeholder:'E.g. emergency fund, BTO down payment, retirement...' }
    ]
  }
};

let surveyState = { id: null, step: 0, answers: [] };

function openSurvey(id) {
  const s = SURVEYS[id];
  if (!s) return;
  surveyState = { id, step: 0, answers: new Array(s.questions.length).fill(null) };
  renderSurveyStep();
  document.getElementById('survey-overlay').classList.add('show');
  document.body.style.overflow = 'hidden';
}

function closeSurvey() {
  document.getElementById('survey-overlay').classList.remove('show');
  document.body.style.overflow = '';
}

function renderSurveyStep() {
  const s = SURVEYS[surveyState.id];
  const step = surveyState.step;
  const total = s.questions.length;
  const modal = document.getElementById('survey-modal');

  // Completion screen
  if (step >= total) {
    modal.innerHTML = `
      <div class="sm-complete">
        <div class="sm-complete-icon">&#127881;</div>
        <h3>Survey Complete!</h3>
        <p>Thank you for sharing your insights.</p>
        <div class="sm-complete-credits">+${s.reward} credits earned</div>
        <p style="font-size:13px;color:var(--g400);">Your credits have been added to your balance.</p>
        <button class="sm-complete-btn" onclick="closeSurvey()">Back to Rewards</button>
      </div>`;
    return;
  }

  const q = s.questions[step];
  const pct = Math.round(((step) / total) * 100);
  let answerHTML = '';

  if (q.type === 'radio') {
    answerHTML = '<div class="sm-options">' + q.options.map((opt, i) =>
      `<div class="sm-option ${surveyState.answers[step] === i ? 'selected' : ''}" onclick="selectSurveyOption(${i})">
        <div class="sm-option-radio"></div>${opt}
      </div>`
    ).join('') + '</div>';
  } else if (q.type === 'multi') {
    const sel = surveyState.answers[step] || [];
    answerHTML = '<div class="sm-options">' + q.options.map((opt, i) =>
      `<div class="sm-option ${sel.includes(i) ? 'selected' : ''}" onclick="toggleSurveyMulti(${i})">
        <div class="sm-option-check">${sel.includes(i) ? '&#10003;' : ''}</div>${opt}
      </div>`
    ).join('') + '</div>';
  } else if (q.type === 'slider') {
    const val = surveyState.answers[step] ?? 5;
    answerHTML = `<div class="sm-slider-wrap">
      <div class="sm-slider-labels"><span>${q.minLabel}</span><span>${q.maxLabel}</span></div>
      <input type="range" class="sm-slider" min="${q.min}" max="${q.max}" value="${val}" oninput="updateSlider(this.value)">
      <div class="sm-slider-value" id="slider-val">${val}</div>
    </div>`;
    if (surveyState.answers[step] === null) surveyState.answers[step] = 5;
  } else if (q.type === 'text') {
    const val = surveyState.answers[step] || '';
    answerHTML = `<div>
      <textarea class="sm-textarea" placeholder="${q.placeholder || ''}" oninput="updateTextAnswer(this.value)" maxlength="500">${val}</textarea>
      <div class="sm-textarea-count"><span id="text-count">${val.length}</span>/500</div>
    </div>`;
    if (surveyState.answers[step] === null) surveyState.answers[step] = '';
  }

  const canProceed = q.type === 'slider' || q.type === 'text' || surveyState.answers[step] !== null;
  const isLast = step === total - 1;

  modal.innerHTML = `
    <div class="sm-header">
      <div class="sm-header-left">
        <h3>${s.title}</h3>
        <p>${s.subtitle}</p>
        <span class="sm-reward-pill">&#127873; +${s.reward} credits</span>
      </div>
      <button class="sm-close" onclick="closeSurvey()">&times;</button>
    </div>
    <div class="sm-progress">
      <div class="sm-progress-bar"><div class="sm-progress-fill" style="width:${pct}%"></div></div>
      <div class="sm-progress-label"><span>Question ${step + 1} of ${total}</span><span>${pct}% complete</span></div>
    </div>
    <div class="sm-question">
      <div class="sm-q-label">Question ${step + 1}</div>
      <div class="sm-q-text">${q.q}</div>
      ${answerHTML}
    </div>
    <div class="sm-footer">
      <button class="sm-btn-back" onclick="surveyBack()" ${step === 0 ? 'disabled' : ''}>Back</button>
      <button class="sm-btn-next" onclick="surveyNext()" ${!canProceed ? 'disabled' : ''}>${isLast ? 'Submit Survey' : 'Next'}</button>
    </div>`;
}

function selectSurveyOption(i) {
  surveyState.answers[surveyState.step] = i;
  renderSurveyStep();
}

function toggleSurveyMulti(i) {
  let sel = surveyState.answers[surveyState.step] || [];
  if (!Array.isArray(sel)) sel = [];
  const idx = sel.indexOf(i);
  if (idx > -1) sel.splice(idx, 1); else sel.push(i);
  surveyState.answers[surveyState.step] = sel.length ? sel : null;
  renderSurveyStep();
}

function updateSlider(val) {
  surveyState.answers[surveyState.step] = parseInt(val);
  document.getElementById('slider-val').textContent = val;
}

function updateTextAnswer(val) {
  surveyState.answers[surveyState.step] = val;
  document.getElementById('text-count').textContent = val.length;
}

function surveyNext() {
  surveyState.step++;
  renderSurveyStep();
}

function surveyBack() {
  if (surveyState.step > 0) { surveyState.step--; renderSurveyStep(); }
}

// ═══ PROFILE DROPDOWN & DAILY CHECK-IN ═══
function toggleProfileDropdown() {
  const dd = document.getElementById('profile-dropdown');
  dd.classList.toggle('show');
}
// Close dropdown when clicking outside
document.addEventListener('click', (e) => {
  const profile = document.getElementById('hb-profile');
  if (profile && !profile.contains(e.target)) {
    document.getElementById('profile-dropdown').classList.remove('show');
  }
});

function dailyCheckIn() {
  const btn = document.getElementById('checkin-btn');
  if (btn.disabled) return;

  // Mark today as checked
  const today = document.querySelector('.pd-day.today');
  if (today) {
    today.classList.add('checked');
    today.querySelector('.pd-day-icon').textContent = '\u2713';
  }

  // Update streak count
  const countEl = document.getElementById('streak-count');
  const newStreak = parseInt(countEl.textContent) + 1;
  countEl.textContent = newStreak;

  // Update milestone message
  const milestone = document.querySelector('.pd-milestone');
  if (newStreak >= 7) {
    milestone.innerHTML = '&#127942; <strong>7-day streak achieved! +50 bonus credits earned!</strong>';
    milestone.style.background = 'var(--green-bg)';
    milestone.style.color = 'var(--green)';
  } else {
    const remaining = 7 - newStreak;
    milestone.innerHTML = '&#127942; ' + remaining + ' more day' + (remaining > 1 ? 's' : '') + ' to unlock <strong>&nbsp;7-day streak bonus: +50 credits!</strong>';
  }

  // Update credits
  const creditsEl = document.querySelector('.pd-credits-value');
  const current = parseInt(creditsEl.textContent.replace(/,/g, ''));
  creditsEl.textContent = (current + 10).toLocaleString();

  // Disable button
  btn.textContent = 'Checked in today \u2713';
  btn.disabled = true;
}

// ═══ PROMO BANNER ROTATION ═══
let promoIdx = 0;
const promoSlides = document.querySelectorAll('.promo-slide');
const promoDots = document.querySelectorAll('#promo-dots span');
const promoTotal = promoSlides.length;

function setPromo(idx) {
  promoIdx = ((idx % promoTotal) + promoTotal) % promoTotal;
  promoSlides.forEach(s => s.classList.remove('active'));
  promoDots.forEach(d => d.classList.remove('active'));
  promoSlides[promoIdx].classList.add('active');
  promoDots[promoIdx].classList.add('active');
}
function promoNav(dir) { setPromo(promoIdx + dir); resetPromoTimer(); }

let promoTimer = setInterval(() => setPromo(promoIdx + 1), 4000);
function resetPromoTimer() {
  clearInterval(promoTimer);
  promoTimer = setInterval(() => setPromo(promoIdx + 1), 4000);
}
promoDots.forEach((dot, i) => dot.addEventListener('click', () => { setPromo(i); resetPromoTimer(); }));

// ═══ REFER & EARN ═══
function copyReferral() {
  const link = document.getElementById('refer-link').value;
  navigator.clipboard.writeText(link).then(() => {
    const btn = document.getElementById('refer-copy-btn');
    const label = document.getElementById('copy-label');
    btn.classList.add('copied');
    label.textContent = 'Copied!';
    setTimeout(() => { btn.classList.remove('copied'); label.textContent = 'Copy'; }, 2000);
  });
}
function shareReferral(platform) {
  const link = encodeURIComponent(document.getElementById('refer-link').value);
  const msg = encodeURIComponent('Check out SingSaver Rewards — earn credits when you apply for financial products!');
  const urls = {
    whatsapp: 'https://wa.me/?text=' + msg + '%20' + link,
    telegram: 'https://t.me/share/url?url=' + link + '&text=' + msg,
    facebook: 'https://www.facebook.com/sharer/sharer.php?u=' + link,
  };
  window.open(urls[platform], '_blank', 'width=600,height=400');
}

// ═══ INIT ═══
initS1();
</script>

</body>
</html>